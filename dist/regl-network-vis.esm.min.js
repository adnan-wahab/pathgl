const VERSION="0.0.8";import createPubSub from"pub-sub-es";import createOriginalRegl from"regl";var EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,degree=Math.PI/180;function create$2(){var e=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function create$3(){var e=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function clone$3(e){var t=new ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function invert$3(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],c=t[6],s=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],_=n*u-r*a,y=n*c-i*a,b=n*s-o*a,w=r*c-i*u,x=r*s-o*u,T=i*s-o*c,E=l*v-f*p,A=l*g-h*p,S=l*m-d*p,R=f*g-h*v,M=f*m-d*v,C=h*m-d*g,N=_*C-y*M+b*R+w*S-x*A+T*E;return N?(N=1/N,e[0]=(u*C-c*M+s*R)*N,e[1]=(i*M-r*C-o*R)*N,e[2]=(v*T-g*x+m*w)*N,e[3]=(h*x-f*T-d*w)*N,e[4]=(c*S-a*C-s*A)*N,e[5]=(n*C-i*S+o*A)*N,e[6]=(g*b-p*T-m*y)*N,e[7]=(l*T-h*b+d*y)*N,e[8]=(a*M-u*S+s*E)*N,e[9]=(r*S-n*M-o*E)*N,e[10]=(p*x-v*b+m*_)*N,e[11]=(f*b-l*x-d*_)*N,e[12]=(u*A-a*R-c*E)*N,e[13]=(n*R-r*A+i*E)*N,e[14]=(v*y-p*w-g*_)*N,e[15]=(l*w-f*y+h*_)*N,e):null}function multiply$3(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],c=t[5],s=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],g=t[13],m=t[14],_=t[15],y=n[0],b=n[1],w=n[2],x=n[3];return e[0]=y*r+b*u+w*f+x*v,e[1]=y*i+b*c+w*h+x*g,e[2]=y*o+b*s+w*d+x*m,e[3]=y*a+b*l+w*p+x*_,y=n[4],b=n[5],w=n[6],x=n[7],e[4]=y*r+b*u+w*f+x*v,e[5]=y*i+b*c+w*h+x*g,e[6]=y*o+b*s+w*d+x*m,e[7]=y*a+b*l+w*p+x*_,y=n[8],b=n[9],w=n[10],x=n[11],e[8]=y*r+b*u+w*f+x*v,e[9]=y*i+b*c+w*h+x*g,e[10]=y*o+b*s+w*d+x*m,e[11]=y*a+b*l+w*p+x*_,y=n[12],b=n[13],w=n[14],x=n[15],e[12]=y*r+b*u+w*f+x*v,e[13]=y*i+b*c+w*h+x*g,e[14]=y*o+b*s+w*d+x*m,e[15]=y*a+b*l+w*p+x*_,e}function fromTranslation$2(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function fromScaling$3(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fromRotation$3(e,t,n){var r,i,o,a=n[0],u=n[1],c=n[2],s=Math.sqrt(a*a+u*u+c*c);return s<EPSILON?null:(a*=s=1/s,u*=s,c*=s,r=Math.sin(t),o=1-(i=Math.cos(t)),e[0]=a*a*o+i,e[1]=u*a*o+c*r,e[2]=c*a*o-u*r,e[3]=0,e[4]=a*u*o-c*r,e[5]=u*u*o+i,e[6]=c*u*o+a*r,e[7]=0,e[8]=a*c*o+u*r,e[9]=u*c*o-a*r,e[10]=c*c*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function getTranslation(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function getScaling(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],a=t[5],u=t[6],c=t[8],s=t[9],l=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(o*o+a*a+u*u),e[2]=Math.sqrt(c*c+s*s+l*l),e}function create$4(){var e=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function length(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function fromValues$4(e,t,n){var r=new ARRAY_TYPE(3);return r[0]=e,r[1]=t,r[2]=n,r}function normalize(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function dot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cross(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],u=n[1],c=n[2];return e[0]=i*c-o*u,e[1]=o*a-r*c,e[2]=r*u-i*a,e}var len=length,forEach=function(){var e=create$4();return function(t,n,r,i,o,a){var u=void 0,c=void 0;for(n||(n=3),r||(r=0),c=i?Math.min(i*n+r,t.length):t.length,u=r;u<c;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],o(e,e,a),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}();function create$5(){var e=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function normalize$1(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a),e}function transformMat4$1(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}var forEach$1=function(){var e=create$5();return function(t,n,r,i,o,a){var u=void 0,c=void 0;for(n||(n=4),r||(r=0),c=i?Math.min(i*n+r,t.length):t.length,u=r;u<c;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],o(e,e,a),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}();function create$6(){var e=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function setAxisAngle(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function slerp(e,t,n,r){var i=t[0],o=t[1],a=t[2],u=t[3],c=n[0],s=n[1],l=n[2],f=n[3],h=void 0,d=void 0,p=void 0,v=void 0,g=void 0;return(d=i*c+o*s+a*l+u*f)<0&&(d=-d,c=-c,s=-s,l=-l,f=-f),1-d>EPSILON?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-r)*h)/p,g=Math.sin(r*h)/p):(v=1-r,g=r),e[0]=v*i+g*c,e[1]=v*o+g*s,e[2]=v*a+g*l,e[3]=v*u+g*f,e}function fromMat3(e,t){var n=t[0]+t[4]+t[8],r=void 0;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*o+a]-t[3*a+o])*r,e[o]=(t[3*o+i]+t[3*i+o])*r,e[a]=(t[3*a+i]+t[3*i+a])*r}return e}var normalize$2=normalize$1,rotationTo=function(){var e=create$4(),t=fromValues$4(1,0,0),n=fromValues$4(0,1,0);return function(r,i,o){var a=dot(i,o);return a<-.999999?(cross(e,t,i),len(e)<1e-6&&cross(e,n,i),normalize(e,e),setAxisAngle(r,e,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(cross(e,i,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+a,normalize$2(r,r))}}(),sqlerp=function(){var e=create$6(),t=create$6();return function(n,r,i,o,a,u){return slerp(e,r,a,u),slerp(t,i,o,u),slerp(n,e,t,2*u*(1-u)),n}}(),setAxes=function(){var e=create$2();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],normalize$2(t,fromMat3(t,e))}}();function create$8(){var e=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function angle$1(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=n*n+r*r;a>0&&(a=1/Math.sqrt(a));var u=i*i+o*o;u>0&&(u=1/Math.sqrt(u));var c=(n*i+r*o)*a*u;return c>1?0:c<-1?Math.PI:Math.acos(c)}var forEach$2=function(){var e=create$8();return function(t,n,r,i,o,a){var u=void 0,c=void 0;for(n||(n=2),r||(r=0),c=i?Math.min(i*n+r,t.length):t.length,u=r;u<c;u+=n)e[0]=t[u],e[1]=t[u+1],o(e,e,a),t[u]=e[0],t[u+1]=e[1];return t}}();const VIEW_CENTER=[0,0,0,1],createCamera=(e=[0,0],t=1,n=0)=>{const r=new Float32Array(16),i=new Float32Array(16),o=new Float32Array(16);let a=create$3();const u=()=>getScaling(r,a)[0],c=([e=0,t=0]=[],n=1,r=0)=>{a=create$3(),s([-e,-t]),f(r),l(1/n)},s=([e=0,t=0]=[])=>{r[0]=e,r[1]=t,r[2]=0;const n=fromTranslation$2(i,r);multiply$3(a,n,a)},l=(e,t)=>{if(e<=0)return;r[0]=e,r[1]=e,r[2]=1;const n=fromScaling$3(i,r),u=t?[...t,0]:VIEW_CENTER,c=fromTranslation$2(r,u);multiply$3(a,c,multiply$3(a,n,multiply$3(a,invert$3(o,c),a)))},f=e=>{const t=create$3();fromRotation$3(t,e,[0,0,1]),multiply$3(a,t,a)};return c(e,t,n),{get translation(){return(()=>getTranslation(r,a).slice(0,2))()},get target(){return(()=>transformMat4$1(r,VIEW_CENTER,invert$3(o,a)))()},get scaling(){return u()},get distance(){return(()=>1/u())()},get rotation(){return(()=>Math.acos(a[0]))()},get view(){return(()=>a)()},lookAt:c,translate:s,pan:s,rotate:f,scale:l,zoom:l,reset:()=>{c(e,t,n)},set:e=>{!e||e.length<16||(a=e)}}},down={},isKeyDown=e=>e?down[e]:down,reset=()=>{Object.keys(down).forEach(e=>{down[e]=!1})},keyup=({key:e})=>{down[e]=!1},keydown=({key:e})=>{down[e]=!0};function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}reset(),window.addEventListener("keydown",keydown,!1),window.addEventListener("keyup",keyup,!1),window.addEventListener("blur",reset,!1);var events=EventEmitter;function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,r,i,o,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(isUndefined(n=this._events[e]))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(isObject(n))for(i=Array.prototype.slice.call(arguments,1),r=(a=n.slice()).length,o=0;o<r;o++)a[o].apply(this,i);return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned&&(n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){if(!isFunction(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},EventEmitter.prototype.removeListener=function(e,t){var n,r,i,o;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(o=i;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(isFunction(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){return this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)};var mousePosition=attach;function attach(e,t){var n=new events;if(n[0]=0,n[1]=0,n.prev=[0,0],n.flush=function(){n.prev[0]=n[0],n.prev[1]=n[1]},n.dispose=function(){n.removeAllListeners("move"),t.removeEventListener("mousemove",r)},"undefined"==typeof window)return n;t=t||e||window;var r=(e=e||document.body)===document.body||e===window?function(e){n.prev[0]=n[0],n.prev[1]=n[1],n[0]=e.clientX,n[1]=e.clientY,n.emit("move",e)}:function(t){n.prev[0]=n[0],n.prev[1]=n[1];var r=e.getBoundingClientRect();n[0]=t.clientX-r.left,n[1]=t.clientY-r.top,n.emit("move",t)};return t.addEventListener("mousemove",r,!1),n}var map=["left","middle","right"],mousePressed=pressed;function pressed(e,t){var n=new events;return n.left=!1,n.right=!1,n.middle=!1,n.dispose=function(){n.left=!1,n.right=!1,n.middle=!1,e&&(e.removeEventListener("contextmenu",o,!1),e.removeEventListener("mousedown",r,!1),window.removeEventListener("mouseup",i,!1))},"undefined"!=typeof window&&((e=e||window).addEventListener("mousedown",r,!1),window.addEventListener("mouseup",i,!1),t&&e.addEventListener("contextmenu",o,!1)),n;function r(e){if(n.right=!1,n[map[e.button]]=!0,n.emit("down",e),t){if(!e.preventDefault)return!1;e.preventDefault(),e.stopPropagation()}}function i(e){n.right=!1,n[map[e.button]]=!1,n.emit("up",e),t&&e.preventDefault&&(e.preventDefault(),e.stopPropagation())}function o(e){return e.preventDefault&&e.preventDefault()&&!1}}var _addEventListener,_removeEventListener,support,wheel=addWheelListener,addWheelListener_1=addWheelListener,removeWheelListener_1=removeWheelListener,prefix="";function addWheelListener(e,t,n){_addWheelListener(e,support,t,n),"DOMMouseScroll"==support&&_addWheelListener(e,"MozMousePixelScroll",t,n)}function removeWheelListener(e,t,n){_removeWheelListener(e,support,t,n),"DOMMouseScroll"==support&&_removeWheelListener(e,"MozMousePixelScroll",t,n)}function _addWheelListener(e,t,n,r){e[_addEventListener](prefix+t,"wheel"==support?n:function(e){!e&&(e=window.event);var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,deltaY:0,deltaZ:0,clientX:e.clientX,clientY:e.clientY,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){e.stopImmediatePropagation&&e.stopImmediatePropagation()}};return"mousewheel"==support?(t.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-.025*e.wheelDeltaX)):t.deltaY=e.detail,n(t)},r||!1)}function _removeWheelListener(e,t,n,r){e[_removeEventListener](prefix+t,n,r||!1)}function detectEventModel(e,t){e&&e.addEventListener?(_addEventListener="addEventListener",_removeEventListener="removeEventListener"):(_addEventListener="attachEvent",_removeEventListener="detachEvent",prefix="on"),support=t?"onwheel"in t.createElement("div")?"wheel":void 0!==t.onmousewheel?"mousewheel":"DOMMouseScroll":"wheel"}detectEventModel("undefined"!=typeof window&&window,"undefined"!=typeof document&&document),wheel.addWheelListener=addWheelListener_1,wheel.removeWheelListener=removeWheelListener_1;var addWheelListener$1=wheel.addWheelListener,removeWheelListener$1=wheel.removeWheelListener,scrollSpeed=getScroller;function getScroller(e,t){var n=new events;return n.flush=r,n.dispose=function(){removeWheelListener$1(e,i,!1)},r(),"undefined"==typeof window?n:(e=e||window,addWheelListener$1(e,i,!1),n);function r(){n[0]=n[1]=n[2]=0}function i(e){var r=1===e.deltaMode?12:1;n[0]+=r*(e.deltaX||0),n[1]+=r*(e.deltaY||0),n[2]+=r*(e.deltaZ||0),n.emit("scroll",n),t&&e.preventDefault&&(e.preventDefault(),e.stopPropagation&&e.stopPropagation())}}const canvas2dCamera=(e,{distance:t=1,target:n=[0,0],rotation:r=0,isFixed:i=!1,isPan:o=!0,panSpeed:a=1,isRotate:u=!0,rotateSpeed:c=1,isZoom:s=!0,zoomSpeed:l=1}={})=>{let f=createCamera(n,t,r),h=!1,d=mousePosition(e),p=mousePressed(e),v=scrollSpeed(e,s),g=e.height/window.devicePixelRatio,m=e.width/window.devicePixelRatio,_=m/g,y=!1;return f.config=(({isFixed:e=null,isPan:t=null,isRotate:n=null,isZoom:r=null,panSpeed:f=null,rotateSpeed:h=null,zoomSpeed:d=null}={})=>{i=null!==e?e:i,o=null!==t?t:o,u=null!==n?n:u,s=null!==r?r:s,a=+f>0?f:a,c=+h>0?h:c,l=+d>0?d:l}),f.dispose=(()=>{v.dispose(),p.dispose(),d.dispose(),f=void 0,v=void 0,p=void 0,d=void 0}),f.refresh=(()=>{g=e.height/window.devicePixelRatio,m=e.width/window.devicePixelRatio,_=m/g}),f.tick=(()=>{if(i)return!1;y=isKeyDown("Alt"),h=!1;const{0:e,1:t}=d,{0:n,1:r}=d.prev;if(o&&p.left&&!y&&(f.pan([a*(e-n)/m*2*_,a*(r-t)/g*2]),h=!0),s&&v[1]){const n=l*Math.exp(v[1]/g),r=(e/m*2-1)*_,i=1-t/g*2;f.scale(1/n,[r,i]),h=!0}if(u&&p.left&&y){const i=m/2,o=g/2,a=n-i,u=o-r,s=e-i,l=o-t,d=angle$1([a,u],[s,l]),p=a*l-s*u;f.rotate(c*d*Math.sign(p)),h=!0}return v.flush(),d.flush(),h}),f};function sortKD(e,t,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;select(e,t,a,r,i,o%2),sortKD(e,t,n,r,a-1,o+1),sortKD(e,t,n,a+1,i,o+1)}function select(e,t,n,r,i,o){for(;i>r;){if(i-r>600){const a=i-r+1,u=n-r+1,c=Math.log(a),s=.5*Math.exp(2*c/3),l=.5*Math.sqrt(c*s*(a-s)/a)*(u-a/2<0?-1:1);select(e,t,n,Math.max(r,Math.floor(n-u*s/a+l)),Math.min(i,Math.floor(n+(a-u)*s/a+l)),o)}const a=t[2*n+o];let u=r,c=i;for(swapItem(e,t,r,n),t[2*i+o]>a&&swapItem(e,t,r,i);u<c;){for(swapItem(e,t,u,c),u++,c--;t[2*u+o]<a;)u++;for(;t[2*c+o]>a;)c--}t[2*r+o]===a?swapItem(e,t,r,c):swapItem(e,t,++c,i),c<=n&&(r=c+1),n<=c&&(i=c-1)}}function swapItem(e,t,n,r){swap(e,n,r),swap(t,2*n,2*r),swap(t,2*n+1,2*r+1)}function swap(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function range(e,t,n,r,i,o,a){const u=[0,e.length-1,0],c=[];let s,l;for(;u.length;){const f=u.pop(),h=u.pop(),d=u.pop();if(h-d<=a){for(let a=d;a<=h;a++)s=t[2*a],l=t[2*a+1],s>=n&&s<=i&&l>=r&&l<=o&&c.push(e[a]);continue}const p=Math.floor((d+h)/2);s=t[2*p],l=t[2*p+1],s>=n&&s<=i&&l>=r&&l<=o&&c.push(e[p]);const v=(f+1)%2;(0===f?n<=s:r<=l)&&(u.push(d),u.push(p-1),u.push(v)),(0===f?i>=s:o>=l)&&(u.push(p+1),u.push(h),u.push(v))}return c}function within(e,t,n,r,i,o){const a=[0,e.length-1,0],u=[],c=i*i;for(;a.length;){const s=a.pop(),l=a.pop(),f=a.pop();if(l-f<=o){for(let i=f;i<=l;i++)sqDist(t[2*i],t[2*i+1],n,r)<=c&&u.push(e[i]);continue}const h=Math.floor((f+l)/2),d=t[2*h],p=t[2*h+1];sqDist(d,p,n,r)<=c&&u.push(e[h]);const v=(s+1)%2;(0===s?n-i<=d:r-i<=p)&&(a.push(f),a.push(h-1),a.push(v)),(0===s?n+i>=d:r+i>=p)&&(a.push(h+1),a.push(l),a.push(v))}return u}function sqDist(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}const defaultGetX=e=>e[0],defaultGetY=e=>e[1];class KDBush{constructor(e,t=defaultGetX,n=defaultGetY,r=64,i=Float64Array){this.nodeSize=r,this.points=e;const o=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),u=this.coords=new i(2*e.length);for(let r=0;r<e.length;r++)a[r]=r,u[2*r]=t(e[r]),u[2*r+1]=n(e[r]);sortKD(a,u,r,0,a.length-1,0)}range(e,t,n,r){return range(this.ids,this.coords,e,t,n,r,this.nodeSize)}within(e,t,n){return within(this.ids,this.coords,e,t,n,this.nodeSize)}}function isObject$1(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),now=function(){return root.Date.now()},Symbol=root.Symbol,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),n=e[symToStringTag];try{e[symToStringTag]=void 0}catch(e){}var r=nativeObjectToString.call(e);return t?e[symToStringTag]=n:delete e[symToStringTag],r}var objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=Symbol?Symbol.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag$1&&symToStringTag$1 in Object(e)?getRawTag(e):objectToString(e)}function isObjectLike(e){return null!=e&&"object"==typeof e}var symbolTag="[object Symbol]";function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==symbolTag}var NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject$1(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject$1(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var n=reIsBinary.test(e);return n||reIsOctal.test(e)?freeParseInt(e.slice(2),n?2:8):reIsBadHex.test(e)?NAN:+e}var FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(e,t,n){var r,i,o,a,u,c,s=0,l=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);function d(t){var n=r,o=i;return r=i=void 0,s=t,a=e.apply(o,n)}function p(e){var n=e-c;return void 0===c||n>=t||n<0||f&&e-s>=o}function v(){var e=now();if(p(e))return g(e);u=setTimeout(v,function(e){var n=t-(e-c);return f?nativeMin(n,o-(e-s)):n}(e))}function g(e){return u=void 0,h&&r?d(e):(r=i=void 0,a)}function m(){var e=now(),n=p(e);if(r=arguments,i=this,c=e,n){if(void 0===u)return function(e){return s=e,u=setTimeout(v,t),l?d(e):a}(c);if(f)return clearTimeout(u),u=setTimeout(v,t),d(c)}return void 0===u&&(u=setTimeout(v,t)),a}return t=toNumber(t)||0,isObject$1(n)&&(l=!!n.leading,o=(f="maxWait"in n)?nativeMax(toNumber(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==u&&clearTimeout(u),s=0,r=c=i=u=void 0},m.flush=function(){return void 0===u?a:g(now())},m}var FUNC_ERROR_TEXT$1="Expected a function";function throttle(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);return isObject$1(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),debounce(e,t,{leading:r,maxWait:t,trailing:i})}const withRaf=(e,t,n=window.requestAnimationFrame)=>{let r,i=!1;return(...o)=>{if(r=o,!i)return i=!0,n(()=>{const n=e(...r);i=!1,t&&t(n)})}},FRAGMENT_SHADER="\nprecision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}",VERTEX_SHADER="\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\nuniform float aspectRatio;\n\nuniform float width;\nuniform int miter;\n\nattribute vec3 prevPosition;\nattribute vec3 currPosition;\nattribute vec3 nextPosition;\nattribute float offsetScale;\n\nvoid main() {\n  vec2 aspectVec = vec2(aspectRatio, 1.0);\n  mat4 projViewModel = projection * view * model;\n  vec4 prevProjected = projViewModel * vec4(prevPosition, 1.0);\n  vec4 currProjected = projViewModel * vec4(currPosition, 1.0);\n  vec4 nextProjected = projViewModel * vec4(nextPosition, 1.0);\n\n  // get 2D screen space with W divide and aspect correction\n  vec2 prevScreen = prevProjected.xy / prevProjected.w * aspectVec;\n  vec2 currScreen = currProjected.xy / currProjected.w * aspectVec;\n  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;\n\n  // starting point uses (next - current)\n  vec2 dir = vec2(0.0);\n  if (currScreen == prevScreen) {\n    dir = normalize(nextScreen - currScreen);\n  }\n  // ending point uses (current - previous)\n  else if (currScreen == nextScreen) {\n    dir = normalize(currScreen - prevScreen);\n  }\n  // somewhere in middle, needs a join\n  else {\n    // get directions from (C - B) and (B - A)\n    vec2 dirA = normalize((currScreen - prevScreen));\n    if (miter == 1) {\n      vec2 dirB = normalize((nextScreen - currScreen));\n      // now compute the miter join normal and length\n      vec2 tangent = normalize(dirA + dirB);\n      vec2 perp = vec2(-dirA.y, dirA.x);\n      vec2 miter = vec2(-tangent.y, tangent.x);\n      dir = tangent;\n    } else {\n      dir = dirA;\n    }\n  }\n\n  vec2 normal = vec2(-dir.y, dir.x) * width;\n  normal.x /= aspectRatio;\n  vec4 offset = vec4(normal * offsetScale, 0.0, 0.0);\n  gl_Position = currProjected + offset;\n}",{push:push,unshift:unshift}=Array.prototype,I=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),FLOAT_BYTES=Float32Array.BYTES_PER_ELEMENT,createMesh=(e,t,n=[])=>{for(let r=0;r<e-1;r++){const e=t+2*r,i=e+1,o=e+2,a=e+3;n.push(e,i,o,o,i,a)}return n},buffer={duplicate(e,t=1,n=1){const r=[],i=new Array(2*t);for(let o=0,a=e.length/t;o<a;o++){const a=o*t;for(let r=0;r<t;r++){const o=e[a+r];i[r]=o,i[r+t]=o*n}push.apply(r,i)}return r},mapElement(e,t,n,r){for(let i=0,o=e.length/n;i<o;i++){const o=t+i*n;e[o]=r(e[o],o,i)}return e},pushElement(e,t,n){const r=new Array(n),i=t*n;for(let t=0;t<n;t++)r[t]=e[i+t];return push.apply(e,r),e},unshiftElement(e,t,n){const r=new Array(n),i=t*n;for(let t=0;t<n;t++)r[t]=e[i+t];return unshift.apply(e,r),e},increaseStride(e,t,n,r=0){const i=[],o=new Array(n).fill(r);for(let n=0,r=e.length/t;n<r;n++){const r=n*t;for(let n=0;n<t;n++)o[n]=e[r+n];push.apply(i,o)}return i}},createLine=(e,{projection:t=I,model:n=I,view:r=I,points:i=[],widths:o=[],color:a=[.8,.5,0,1],width:u=1,miter:c=1,is2d:s=!1,zPos2d:l=0}={})=>{if(!e)return void console.error("Regl instance is undefined.");let f,h,d,p,v,g,m,_,y,b,w,x=s?2:3;const T=()=>{m=e.buffer(),_=e.buffer(),y={prevPosition:{buffer:()=>m,offset:0,stride:3*FLOAT_BYTES},currPosition:{buffer:()=>m,offset:3*FLOAT_BYTES*2,stride:3*FLOAT_BYTES},nextPosition:{buffer:()=>m,offset:3*FLOAT_BYTES*4,stride:3*FLOAT_BYTES},offsetScale:()=>_},b=e.elements(),w=e({attributes:y,depth:{enable:!s},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},uniforms:{projection:(e,t)=>e.projection||t.projection,model:(e,t)=>e.model||t.model,view:(e,t)=>e.view||t.view,aspectRatio:({viewportWidth:e,viewportHeight:t})=>e/t,color:()=>a,width:({viewportWidth:e})=>u/e*window.devicePixelRatio,miter:c},elements:()=>b,vert:VERTEX_SHADER,frag:FRAGMENT_SHADER})},E=()=>{A(),T()},A=()=>{i=null,d=null,p=null,v=null,g=null,m.destroy(),_.destroy(),b.destroy()},S=(e=[],t=o,n=s)=>{i=e,x=(s=n)?2:3,f=Math.floor(i.length/x),h=f+2,t.length===f&&(o=t),i&&i.length>1?(i.length%x>0&&console.warn(`The length of points (${f}) does not match the dimensions (${x}). Incomplete points are ignored.`),d=i.slice(0,f*x),s&&(d=buffer.increaseStride(d,2,3,l)),o.length!==f&&(o=new Array(f).fill(1)),buffer.pushElement(d,f-1,3),buffer.unshiftElement(d,0,3),p=new Float32Array(buffer.duplicate(d,3)),v=buffer.duplicate(o,1,-1),g=createMesh(f,0),m({usage:"dynamic",type:"float",length:3*h*2*FLOAT_BYTES,data:p}),_({usage:"dynamic",type:"float",length:1*f*2*FLOAT_BYTES,data:v}),b({primitive:"triangles",usage:"dynamic",type:"uint16",data:g})):E()};return T(),i&&i.length>1&&S(i),{clear:E,destroy:A,draw:({projection:e,model:o,view:a}={})=>{e&&(t=e),o&&(n=o),a&&(r=a),i&&i.length>1&&w({projection:t,model:n,view:r})},getPoints:()=>i,setPoints:S,getData:()=>({points:p,widths:v}),getBuffer:()=>({points:m,widths:_}),getStyle:()=>({color:a,miter:c,width:u}),setStyle:({color:e,miter:t,width:n}={})=>{e&&(a=e),t&&(c=t),+n>0&&(u=n)}}};var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var lodash=createCommonjsModule(function(e,t){(function(){var n,r=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",s=1,l=2,f=4,h=1,d=2,p=1,v=2,g=4,m=8,_=16,y=32,b=64,w=128,x=256,T=512,E=30,A="...",S=800,R=16,M=1,C=2,N=1/0,L=9007199254740991,$=1.7976931348623157e308,k=NaN,D=4294967295,I=D-1,O=D>>>1,F=[["ary",w],["bind",p],["bindKey",v],["curry",m],["curryRight",_],["flip",T],["partial",y],["partialRight",b],["rearg",x]],P="[object Arguments]",U="[object Array]",j="[object AsyncFunction]",Y="[object Boolean]",W="[object Date]",z="[object DOMException]",H="[object Error]",B="[object Function]",V="[object GeneratorFunction]",q="[object Map]",G="[object Number]",X="[object Null]",Z="[object Object]",Q="[object Proxy]",K="[object RegExp]",J="[object Set]",ee="[object String]",te="[object Symbol]",ne="[object Undefined]",re="[object WeakMap]",ie="[object WeakSet]",oe="[object ArrayBuffer]",ae="[object DataView]",ue="[object Float32Array]",ce="[object Float64Array]",se="[object Int8Array]",le="[object Int16Array]",fe="[object Int32Array]",he="[object Uint8Array]",de="[object Uint8ClampedArray]",pe="[object Uint16Array]",ve="[object Uint32Array]",ge=/\b__p \+= '';/g,me=/\b(__p \+=) '' \+/g,_e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ye=/&(?:amp|lt|gt|quot|#39);/g,be=/[&<>"']/g,we=RegExp(ye.source),xe=RegExp(be.source),Te=/<%-([\s\S]+?)%>/g,Ee=/<%([\s\S]+?)%>/g,Ae=/<%=([\s\S]+?)%>/g,Se=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/,Me=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ce=/[\\^$.*+?()[\]{}|]/g,Ne=RegExp(Ce.source),Le=/^\s+|\s+$/g,$e=/^\s+/,ke=/\s+$/,De=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ie=/\{\n\/\* \[wrapped with (.+)\] \*/,Oe=/,? & /,Fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pe=/\\(\\)?/g,Ue=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,je=/\w*$/,Ye=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,ze=/^\[object .+?Constructor\]$/,He=/^0o[0-7]+$/i,Be=/^(?:0|[1-9]\d*)$/,Ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qe=/($^)/,Ge=/['\n\r\u2028\u2029\\]/g,Xe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ze="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qe="[\\ud800-\\udfff]",Ke="["+Ze+"]",Je="["+Xe+"]",et="\\d+",tt="[\\u2700-\\u27bf]",nt="[a-z\\xdf-\\xf6\\xf8-\\xff]",rt="[^\\ud800-\\udfff"+Ze+et+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",it="\\ud83c[\\udffb-\\udfff]",ot="[^\\ud800-\\udfff]",at="(?:\\ud83c[\\udde6-\\uddff]){2}",ut="[\\ud800-\\udbff][\\udc00-\\udfff]",ct="[A-Z\\xc0-\\xd6\\xd8-\\xde]",st="(?:"+nt+"|"+rt+")",lt="(?:"+ct+"|"+rt+")",ft="(?:"+Je+"|"+it+")"+"?",ht="[\\ufe0e\\ufe0f]?"+ft+("(?:\\u200d(?:"+[ot,at,ut].join("|")+")[\\ufe0e\\ufe0f]?"+ft+")*"),dt="(?:"+[tt,at,ut].join("|")+")"+ht,pt="(?:"+[ot+Je+"?",Je,at,ut,Qe].join("|")+")",vt=RegExp("['’]","g"),gt=RegExp(Je,"g"),mt=RegExp(it+"(?="+it+")|"+pt+ht,"g"),_t=RegExp([ct+"?"+nt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Ke,ct,"$"].join("|")+")",lt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Ke,ct+st,"$"].join("|")+")",ct+"?"+st+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ct+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",et,dt].join("|"),"g"),yt=RegExp("[\\u200d\\ud800-\\udfff"+Xe+"\\ufe0e\\ufe0f]"),bt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xt=-1,Tt={};Tt[ue]=Tt[ce]=Tt[se]=Tt[le]=Tt[fe]=Tt[he]=Tt[de]=Tt[pe]=Tt[ve]=!0,Tt[P]=Tt[U]=Tt[oe]=Tt[Y]=Tt[ae]=Tt[W]=Tt[H]=Tt[B]=Tt[q]=Tt[G]=Tt[Z]=Tt[K]=Tt[J]=Tt[ee]=Tt[re]=!1;var Et={};Et[P]=Et[U]=Et[oe]=Et[ae]=Et[Y]=Et[W]=Et[ue]=Et[ce]=Et[se]=Et[le]=Et[fe]=Et[q]=Et[G]=Et[Z]=Et[K]=Et[J]=Et[ee]=Et[te]=Et[he]=Et[de]=Et[pe]=Et[ve]=!0,Et[H]=Et[B]=Et[re]=!1;var At={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},St=parseFloat,Rt=parseInt,Mt="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Ct="object"==typeof self&&self&&self.Object===Object&&self,Nt=Mt||Ct||Function("return this")(),Lt=t&&!t.nodeType&&t,$t=Lt&&e&&!e.nodeType&&e,kt=$t&&$t.exports===Lt,Dt=kt&&Mt.process,It=function(){try{var e=$t&&$t.require&&$t.require("util").types;return e||Dt&&Dt.binding&&Dt.binding("util")}catch(e){}}(),Ot=It&&It.isArrayBuffer,Ft=It&&It.isDate,Pt=It&&It.isMap,Ut=It&&It.isRegExp,jt=It&&It.isSet,Yt=It&&It.isTypedArray;function Wt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function zt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Ht(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Bt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Vt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function qt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Gt(e,t){return!!(null==e?0:e.length)&&on(e,t,0)>-1}function Xt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Zt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Qt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Kt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Jt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function en(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var tn=sn("length");function nn(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function rn(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function on(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):rn(e,un,n)}function an(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function un(e){return e!=e}function cn(e,t){var n=null==e?0:e.length;return n?hn(e,t)/n:k}function sn(e){return function(t){return null==t?n:t[e]}}function ln(e){return function(t){return null==e?n:e[t]}}function fn(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function hn(e,t){for(var r,i=-1,o=e.length;++i<o;){var a=t(e[i]);a!==n&&(r=r===n?a:r+a)}return r}function dn(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function pn(e){return function(t){return e(t)}}function vn(e,t){return Zt(t,function(t){return e[t]})}function gn(e,t){return e.has(t)}function mn(e,t){for(var n=-1,r=e.length;++n<r&&on(t,e[n],0)>-1;);return n}function _n(e,t){for(var n=e.length;n--&&on(t,e[n],0)>-1;);return n}var yn=ln({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),bn=ln({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function wn(e){return"\\"+At[e]}function xn(e){return yt.test(e)}function Tn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function En(e,t){return function(n){return e(t(n))}}function An(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==c||(e[n]=c,o[i++]=n)}return o}function Sn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Rn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Mn(e){return xn(e)?function(e){var t=mt.lastIndex=0;for(;mt.test(e);)++t;return t}(e):tn(e)}function Cn(e){return xn(e)?function(e){return e.match(mt)||[]}(e):function(e){return e.split("")}(e)}var Nn=ln({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Ln=function e(t){var Xe,Ze=(t=null==t?Nt:Ln.defaults(Nt.Object(),t,Ln.pick(Nt,wt))).Array,Qe=t.Date,Ke=t.Error,Je=t.Function,et=t.Math,tt=t.Object,nt=t.RegExp,rt=t.String,it=t.TypeError,ot=Ze.prototype,at=Je.prototype,ut=tt.prototype,ct=t["__core-js_shared__"],st=at.toString,lt=ut.hasOwnProperty,ft=0,ht=(Xe=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||""))?"Symbol(src)_1."+Xe:"",dt=ut.toString,pt=st.call(tt),mt=Nt._,yt=nt("^"+st.call(lt).replace(Ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),At=kt?t.Buffer:n,Mt=t.Symbol,Ct=t.Uint8Array,Lt=At?At.allocUnsafe:n,$t=En(tt.getPrototypeOf,tt),Dt=tt.create,It=ut.propertyIsEnumerable,tn=ot.splice,ln=Mt?Mt.isConcatSpreadable:n,$n=Mt?Mt.iterator:n,kn=Mt?Mt.toStringTag:n,Dn=function(){try{var e=Uo(tt,"defineProperty");return e({},"",{}),e}catch(e){}}(),In=t.clearTimeout!==Nt.clearTimeout&&t.clearTimeout,On=Qe&&Qe.now!==Nt.Date.now&&Qe.now,Fn=t.setTimeout!==Nt.setTimeout&&t.setTimeout,Pn=et.ceil,Un=et.floor,jn=tt.getOwnPropertySymbols,Yn=At?At.isBuffer:n,Wn=t.isFinite,zn=ot.join,Hn=En(tt.keys,tt),Bn=et.max,Vn=et.min,qn=Qe.now,Gn=t.parseInt,Xn=et.random,Zn=ot.reverse,Qn=Uo(t,"DataView"),Kn=Uo(t,"Map"),Jn=Uo(t,"Promise"),er=Uo(t,"Set"),tr=Uo(t,"WeakMap"),nr=Uo(tt,"create"),rr=tr&&new tr,ir={},or=fa(Qn),ar=fa(Kn),ur=fa(Jn),cr=fa(er),sr=fa(tr),lr=Mt?Mt.prototype:n,fr=lr?lr.valueOf:n,hr=lr?lr.toString:n;function dr(e){if(Mu(e)&&!mu(e)&&!(e instanceof mr)){if(e instanceof gr)return e;if(lt.call(e,"__wrapped__"))return ha(e)}return new gr(e)}var pr=function(){function e(){}return function(t){if(!Ru(t))return{};if(Dt)return Dt(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function vr(){}function gr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function mr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=D,this.__views__=[]}function _r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function yr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function br(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function wr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new br;++t<n;)this.add(e[t])}function xr(e){var t=this.__data__=new yr(e);this.size=t.size}function Tr(e,t){var n=mu(e),r=!n&&gu(e),i=!n&&!r&&wu(e),o=!n&&!r&&!i&&Ou(e),a=n||r||i||o,u=a?dn(e.length,rt):[],c=u.length;for(var s in e)!t&&!lt.call(e,s)||a&&("length"==s||i&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Vo(s,c))||u.push(s);return u}function Er(e){var t=e.length;return t?e[wi(0,t-1)]:n}function Ar(e,t){return ca(no(e),Dr(t,0,e.length))}function Sr(e){return ca(no(e))}function Rr(e,t,r){(r===n||du(e[t],r))&&(r!==n||t in e)||$r(e,t,r)}function Mr(e,t,r){var i=e[t];lt.call(e,t)&&du(i,r)&&(r!==n||t in e)||$r(e,t,r)}function Cr(e,t){for(var n=e.length;n--;)if(du(e[n][0],t))return n;return-1}function Nr(e,t,n,r){return Ur(e,function(e,i,o){t(r,e,n(e),o)}),r}function Lr(e,t){return e&&ro(t,ic(t),e)}function $r(e,t,n){"__proto__"==t&&Dn?Dn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function kr(e,t){for(var r=-1,i=t.length,o=Ze(i),a=null==e;++r<i;)o[r]=a?n:Ju(e,t[r]);return o}function Dr(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function Ir(e,t,r,i,o,a){var u,c=t&s,h=t&l,d=t&f;if(r&&(u=o?r(e,i,o,a):r(e)),u!==n)return u;if(!Ru(e))return e;var p=mu(e);if(p){if(u=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&lt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!c)return no(e,u)}else{var v=Wo(e),g=v==B||v==V;if(wu(e))return Zi(e,c);if(v==Z||v==P||g&&!o){if(u=h||g?{}:Ho(e),!c)return h?function(e,t){return ro(e,Yo(e),t)}(e,function(e,t){return e&&ro(t,oc(t),e)}(u,e)):function(e,t){return ro(e,jo(e),t)}(e,Lr(u,e))}else{if(!Et[v])return o?e:{};u=function(e,t,n){var r,i,o,a=e.constructor;switch(t){case oe:return Qi(e);case Y:case W:return new a(+e);case ae:return function(e,t){var n=t?Qi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case ue:case ce:case se:case le:case fe:case he:case de:case pe:case ve:return Ki(e,n);case q:return new a;case G:case ee:return new a(e);case K:return(o=new(i=e).constructor(i.source,je.exec(i))).lastIndex=i.lastIndex,o;case J:return new a;case te:return r=e,fr?tt(fr.call(r)):{}}}(e,v,c)}}a||(a=new xr);var m=a.get(e);if(m)return m;a.set(e,u),ku(e)?e.forEach(function(n){u.add(Ir(n,t,r,n,e,a))}):Cu(e)&&e.forEach(function(n,i){u.set(i,Ir(n,t,r,i,e,a))});var _=p?n:(d?h?$o:Lo:h?oc:ic)(e);return Ht(_||e,function(n,i){_&&(n=e[i=n]),Mr(u,i,Ir(n,t,r,i,e,a))}),u}function Or(e,t,r){var i=r.length;if(null==e)return!i;for(e=tt(e);i--;){var o=r[i],a=t[o],u=e[o];if(u===n&&!(o in e)||!a(u))return!1}return!0}function Fr(e,t,r){if("function"!=typeof e)throw new it(o);return ia(function(){e.apply(n,r)},t)}function Pr(e,t,n,i){var o=-1,a=Gt,u=!0,c=e.length,s=[],l=t.length;if(!c)return s;n&&(t=Zt(t,pn(n))),i?(a=Xt,u=!1):t.length>=r&&(a=gn,u=!1,t=new wr(t));e:for(;++o<c;){var f=e[o],h=null==n?f:n(f);if(f=i||0!==f?f:0,u&&h==h){for(var d=l;d--;)if(t[d]===h)continue e;s.push(f)}else a(t,h,i)||s.push(f)}return s}dr.templateSettings={escape:Te,evaluate:Ee,interpolate:Ae,variable:"",imports:{_:dr}},dr.prototype=vr.prototype,dr.prototype.constructor=dr,gr.prototype=pr(vr.prototype),gr.prototype.constructor=gr,mr.prototype=pr(vr.prototype),mr.prototype.constructor=mr,_r.prototype.clear=function(){this.__data__=nr?nr(null):{},this.size=0},_r.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},_r.prototype.get=function(e){var t=this.__data__;if(nr){var r=t[e];return r===a?n:r}return lt.call(t,e)?t[e]:n},_r.prototype.has=function(e){var t=this.__data__;return nr?t[e]!==n:lt.call(t,e)},_r.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nr&&t===n?a:t,this},yr.prototype.clear=function(){this.__data__=[],this.size=0},yr.prototype.delete=function(e){var t=this.__data__,n=Cr(t,e);return!(n<0||(n==t.length-1?t.pop():tn.call(t,n,1),--this.size,0))},yr.prototype.get=function(e){var t=this.__data__,r=Cr(t,e);return r<0?n:t[r][1]},yr.prototype.has=function(e){return Cr(this.__data__,e)>-1},yr.prototype.set=function(e,t){var n=this.__data__,r=Cr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},br.prototype.clear=function(){this.size=0,this.__data__={hash:new _r,map:new(Kn||yr),string:new _r}},br.prototype.delete=function(e){var t=Fo(this,e).delete(e);return this.size-=t?1:0,t},br.prototype.get=function(e){return Fo(this,e).get(e)},br.prototype.has=function(e){return Fo(this,e).has(e)},br.prototype.set=function(e,t){var n=Fo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},wr.prototype.add=wr.prototype.push=function(e){return this.__data__.set(e,a),this},wr.prototype.has=function(e){return this.__data__.has(e)},xr.prototype.clear=function(){this.__data__=new yr,this.size=0},xr.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},xr.prototype.get=function(e){return this.__data__.get(e)},xr.prototype.has=function(e){return this.__data__.has(e)},xr.prototype.set=function(e,t){var n=this.__data__;if(n instanceof yr){var i=n.__data__;if(!Kn||i.length<r-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new br(i)}return n.set(e,t),this.size=n.size,this};var Ur=ao(qr),jr=ao(Gr,!0);function Yr(e,t){var n=!0;return Ur(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Wr(e,t,r){for(var i=-1,o=e.length;++i<o;){var a=e[i],u=t(a);if(null!=u&&(c===n?u==u&&!Iu(u):r(u,c)))var c=u,s=a}return s}function zr(e,t){var n=[];return Ur(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Hr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Bo),i||(i=[]);++o<a;){var u=e[o];t>0&&n(u)?t>1?Hr(u,t-1,n,r,i):Qt(i,u):r||(i[i.length]=u)}return i}var Br=uo(),Vr=uo(!0);function qr(e,t){return e&&Br(e,t,ic)}function Gr(e,t){return e&&Vr(e,t,ic)}function Xr(e,t){return qt(t,function(t){return Eu(e[t])})}function Zr(e,t){for(var r=0,i=(t=Vi(t,e)).length;null!=e&&r<i;)e=e[la(t[r++])];return r&&r==i?e:n}function Qr(e,t,n){var r=t(e);return mu(e)?r:Qt(r,n(e))}function Kr(e){return null==e?e===n?ne:X:kn&&kn in tt(e)?function(e){var t=lt.call(e,kn),r=e[kn];try{e[kn]=n}catch(e){}var i=dt.call(e);return t?e[kn]=r:delete e[kn],i}(e):function(e){return dt.call(e)}(e)}function Jr(e,t){return e>t}function ei(e,t){return null!=e&&lt.call(e,t)}function ti(e,t){return null!=e&&t in tt(e)}function ni(e,t,r){for(var i=r?Xt:Gt,o=e[0].length,a=e.length,u=a,c=Ze(a),s=1/0,l=[];u--;){var f=e[u];u&&t&&(f=Zt(f,pn(t))),s=Vn(f.length,s),c[u]=!r&&(t||o>=120&&f.length>=120)?new wr(u&&f):n}f=e[0];var h=-1,d=c[0];e:for(;++h<o&&l.length<s;){var p=f[h],v=t?t(p):p;if(p=r||0!==p?p:0,!(d?gn(d,v):i(l,v,r))){for(u=a;--u;){var g=c[u];if(!(g?gn(g,v):i(e[u],v,r)))continue e}d&&d.push(v),l.push(p)}}return l}function ri(e,t,r){var i=null==(e=ta(e,t=Vi(t,e)))?e:e[la(Ta(t))];return null==i?n:Wt(i,e,r)}function ii(e){return Mu(e)&&Kr(e)==P}function oi(e,t,r,i,o){return e===t||(null==e||null==t||!Mu(e)&&!Mu(t)?e!=e&&t!=t:function(e,t,r,i,o,a){var u=mu(e),c=mu(t),s=u?U:Wo(e),l=c?U:Wo(t),f=(s=s==P?Z:s)==Z,p=(l=l==P?Z:l)==Z,v=s==l;if(v&&wu(e)){if(!wu(t))return!1;u=!0,f=!1}if(v&&!f)return a||(a=new xr),u||Ou(e)?Co(e,t,r,i,o,a):function(e,t,n,r,i,o,a){switch(n){case ae:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case oe:return!(e.byteLength!=t.byteLength||!o(new Ct(e),new Ct(t)));case Y:case W:case G:return du(+e,+t);case H:return e.name==t.name&&e.message==t.message;case K:case ee:return e==t+"";case q:var u=Tn;case J:var c=r&h;if(u||(u=Sn),e.size!=t.size&&!c)return!1;var s=a.get(e);if(s)return s==t;r|=d,a.set(e,t);var l=Co(u(e),u(t),r,i,o,a);return a.delete(e),l;case te:if(fr)return fr.call(e)==fr.call(t)}return!1}(e,t,s,r,i,o,a);if(!(r&h)){var g=f&&lt.call(e,"__wrapped__"),m=p&&lt.call(t,"__wrapped__");if(g||m){var _=g?e.value():e,y=m?t.value():t;return a||(a=new xr),o(_,y,r,i,a)}}return!!v&&(a||(a=new xr),function(e,t,r,i,o,a){var u=r&h,c=Lo(e),s=c.length,l=Lo(t).length;if(s!=l&&!u)return!1;for(var f=s;f--;){var d=c[f];if(!(u?d in t:lt.call(t,d)))return!1}var p=a.get(e);if(p&&a.get(t))return p==t;var v=!0;a.set(e,t),a.set(t,e);for(var g=u;++f<s;){d=c[f];var m=e[d],_=t[d];if(i)var y=u?i(_,m,d,t,e,a):i(m,_,d,e,t,a);if(!(y===n?m===_||o(m,_,r,i,a):y)){v=!1;break}g||(g="constructor"==d)}if(v&&!g){var b=e.constructor,w=t.constructor;b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(v=!1)}return a.delete(e),a.delete(t),v}(e,t,r,i,o,a))}(e,t,r,i,oi,o))}function ai(e,t,r,i){var o=r.length,a=o,u=!i;if(null==e)return!a;for(e=tt(e);o--;){var c=r[o];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var s=(c=r[o])[0],l=e[s],f=c[1];if(u&&c[2]){if(l===n&&!(s in e))return!1}else{var p=new xr;if(i)var v=i(l,f,s,e,t,p);if(!(v===n?oi(f,l,h|d,i,p):v))return!1}}return!0}function ui(e){return!(!Ru(e)||(t=e,ht&&ht in t))&&(Eu(e)?yt:ze).test(fa(e));var t}function ci(e){return"function"==typeof e?e:null==e?Nc:"object"==typeof e?mu(e)?pi(e[0],e[1]):di(e):Uc(e)}function si(e){if(!Qo(e))return Hn(e);var t=[];for(var n in tt(e))lt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function li(e){if(!Ru(e))return function(e){var t=[];if(null!=e)for(var n in tt(e))t.push(n);return t}(e);var t=Qo(e),n=[];for(var r in e)("constructor"!=r||!t&&lt.call(e,r))&&n.push(r);return n}function fi(e,t){return e<t}function hi(e,t){var n=-1,r=yu(e)?Ze(e.length):[];return Ur(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function di(e){var t=Po(e);return 1==t.length&&t[0][2]?Jo(t[0][0],t[0][1]):function(n){return n===e||ai(n,e,t)}}function pi(e,t){return Go(e)&&Ko(t)?Jo(la(e),t):function(r){var i=Ju(r,e);return i===n&&i===t?ec(r,e):oi(t,i,h|d)}}function vi(e,t,r,i,o){e!==t&&Br(t,function(a,u){if(o||(o=new xr),Ru(a))!function(e,t,r,i,o,a,u){var c=na(e,r),s=na(t,r),l=u.get(s);if(l)Rr(e,r,l);else{var f=a?a(c,s,r+"",e,t,u):n,h=f===n;if(h){var d=mu(s),p=!d&&wu(s),v=!d&&!p&&Ou(s);f=s,d||p||v?mu(c)?f=c:bu(c)?f=no(c):p?(h=!1,f=Zi(s,!0)):v?(h=!1,f=Ki(s,!0)):f=[]:Lu(s)||gu(s)?(f=c,gu(c)?f=Hu(c):Ru(c)&&!Eu(c)||(f=Ho(s))):h=!1}h&&(u.set(s,f),o(f,s,i,a,u),u.delete(s)),Rr(e,r,f)}}(e,t,u,r,vi,i,o);else{var c=i?i(na(e,u),a,u+"",e,t,o):n;c===n&&(c=a),Rr(e,u,c)}},oc)}function gi(e,t){var r=e.length;if(r)return Vo(t+=t<0?r:0,r)?e[t]:n}function mi(e,t,n){var r=-1;return t=Zt(t.length?t:[Nc],pn(Oo())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(hi(e,function(e,n,i){return{criteria:Zt(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,u=n.length;++r<a;){var c=Ji(i[r],o[r]);if(c){if(r>=u)return c;var s=n[r];return c*("desc"==s?-1:1)}}return e.index-t.index}(e,t,n)})}function _i(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],u=Zr(e,a);n(u,a)&&Si(o,Vi(a,e),u)}return o}function yi(e,t,n,r){var i=r?an:on,o=-1,a=t.length,u=e;for(e===t&&(t=no(t)),n&&(u=Zt(e,pn(n)));++o<a;)for(var c=0,s=t[o],l=n?n(s):s;(c=i(u,l,c,r))>-1;)u!==e&&tn.call(u,c,1),tn.call(e,c,1);return e}function bi(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Vo(i)?tn.call(e,i,1):Pi(e,i)}}return e}function wi(e,t){return e+Un(Xn()*(t-e+1))}function xi(e,t){var n="";if(!e||t<1||t>L)return n;do{t%2&&(n+=e),(t=Un(t/2))&&(e+=e)}while(t);return n}function Ti(e,t){return oa(ea(e,t,Nc),e+"")}function Ei(e){return Er(dc(e))}function Ai(e,t){var n=dc(e);return ca(n,Dr(t,0,n.length))}function Si(e,t,r,i){if(!Ru(e))return e;for(var o=-1,a=(t=Vi(t,e)).length,u=a-1,c=e;null!=c&&++o<a;){var s=la(t[o]),l=r;if(o!=u){var f=c[s];(l=i?i(f,s,c):n)===n&&(l=Ru(f)?f:Vo(t[o+1])?[]:{})}Mr(c,s,l),c=c[s]}return e}var Ri=rr?function(e,t){return rr.set(e,t),e}:Nc,Mi=Dn?function(e,t){return Dn(e,"toString",{configurable:!0,enumerable:!1,value:Rc(t),writable:!0})}:Nc;function Ci(e){return ca(dc(e))}function Ni(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Ze(i);++r<i;)o[r]=e[r+t];return o}function Li(e,t){var n;return Ur(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function $i(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=O){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!Iu(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ki(e,t,Nc,n)}function ki(e,t,r,i){t=r(t);for(var o=0,a=null==e?0:e.length,u=t!=t,c=null===t,s=Iu(t),l=t===n;o<a;){var f=Un((o+a)/2),h=r(e[f]),d=h!==n,p=null===h,v=h==h,g=Iu(h);if(u)var m=i||v;else m=l?v&&(i||d):c?v&&d&&(i||!p):s?v&&d&&!p&&(i||!g):!p&&!g&&(i?h<=t:h<t);m?o=f+1:a=f}return Vn(a,I)}function Di(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],u=t?t(a):a;if(!n||!du(u,c)){var c=u;o[i++]=0===a?0:a}}return o}function Ii(e){return"number"==typeof e?e:Iu(e)?k:+e}function Oi(e){if("string"==typeof e)return e;if(mu(e))return Zt(e,Oi)+"";if(Iu(e))return hr?hr.call(e):"";var t=e+"";return"0"==t&&1/e==-N?"-0":t}function Fi(e,t,n){var i=-1,o=Gt,a=e.length,u=!0,c=[],s=c;if(n)u=!1,o=Xt;else if(a>=r){var l=t?null:To(e);if(l)return Sn(l);u=!1,o=gn,s=new wr}else s=t?[]:c;e:for(;++i<a;){var f=e[i],h=t?t(f):f;if(f=n||0!==f?f:0,u&&h==h){for(var d=s.length;d--;)if(s[d]===h)continue e;t&&s.push(h),c.push(f)}else o(s,h,n)||(s!==c&&s.push(h),c.push(f))}return c}function Pi(e,t){return null==(e=ta(e,t=Vi(t,e)))||delete e[la(Ta(t))]}function Ui(e,t,n,r){return Si(e,t,n(Zr(e,t)),r)}function ji(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Ni(e,r?0:o,r?o+1:i):Ni(e,r?o+1:0,r?i:o)}function Yi(e,t){var n=e;return n instanceof mr&&(n=n.value()),Kt(t,function(e,t){return t.func.apply(t.thisArg,Qt([e],t.args))},n)}function Wi(e,t,n){var r=e.length;if(r<2)return r?Fi(e[0]):[];for(var i=-1,o=Ze(r);++i<r;)for(var a=e[i],u=-1;++u<r;)u!=i&&(o[i]=Pr(o[i]||a,e[u],t,n));return Fi(Hr(o,1),t,n)}function zi(e,t,r){for(var i=-1,o=e.length,a=t.length,u={};++i<o;){var c=i<a?t[i]:n;r(u,e[i],c)}return u}function Hi(e){return bu(e)?e:[]}function Bi(e){return"function"==typeof e?e:Nc}function Vi(e,t){return mu(e)?e:Go(e,t)?[e]:sa(Bu(e))}var qi=Ti;function Gi(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:Ni(e,t,r)}var Xi=In||function(e){return Nt.clearTimeout(e)};function Zi(e,t){if(t)return e.slice();var n=e.length,r=Lt?Lt(n):new e.constructor(n);return e.copy(r),r}function Qi(e){var t=new e.constructor(e.byteLength);return new Ct(t).set(new Ct(e)),t}function Ki(e,t){var n=t?Qi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ji(e,t){if(e!==t){var r=e!==n,i=null===e,o=e==e,a=Iu(e),u=t!==n,c=null===t,s=t==t,l=Iu(t);if(!c&&!l&&!a&&e>t||a&&u&&s&&!c&&!l||i&&u&&s||!r&&s||!o)return 1;if(!i&&!a&&!l&&e<t||l&&r&&o&&!i&&!a||c&&r&&o||!u&&o||!s)return-1}return 0}function eo(e,t,n,r){for(var i=-1,o=e.length,a=n.length,u=-1,c=t.length,s=Bn(o-a,0),l=Ze(c+s),f=!r;++u<c;)l[u]=t[u];for(;++i<a;)(f||i<o)&&(l[n[i]]=e[i]);for(;s--;)l[u++]=e[i++];return l}function to(e,t,n,r){for(var i=-1,o=e.length,a=-1,u=n.length,c=-1,s=t.length,l=Bn(o-u,0),f=Ze(l+s),h=!r;++i<l;)f[i]=e[i];for(var d=i;++c<s;)f[d+c]=t[c];for(;++a<u;)(h||i<o)&&(f[d+n[a]]=e[i++]);return f}function no(e,t){var n=-1,r=e.length;for(t||(t=Ze(r));++n<r;)t[n]=e[n];return t}function ro(e,t,r,i){var o=!r;r||(r={});for(var a=-1,u=t.length;++a<u;){var c=t[a],s=i?i(r[c],e[c],c,r,e):n;s===n&&(s=e[c]),o?$r(r,c,s):Mr(r,c,s)}return r}function io(e,t){return function(n,r){var i=mu(n)?zt:Nr,o=t?t():{};return i(n,e,Oo(r,2),o)}}function oo(e){return Ti(function(t,r){var i=-1,o=r.length,a=o>1?r[o-1]:n,u=o>2?r[2]:n;for(a=e.length>3&&"function"==typeof a?(o--,a):n,u&&qo(r[0],r[1],u)&&(a=o<3?n:a,o=1),t=tt(t);++i<o;){var c=r[i];c&&e(t,c,i,a)}return t})}function ao(e,t){return function(n,r){if(null==n)return n;if(!yu(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=tt(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function uo(e){return function(t,n,r){for(var i=-1,o=tt(t),a=r(t),u=a.length;u--;){var c=a[e?u:++i];if(!1===n(o[c],c,o))break}return t}}function co(e){return function(t){var r=xn(t=Bu(t))?Cn(t):n,i=r?r[0]:t.charAt(0),o=r?Gi(r,1).join(""):t.slice(1);return i[e]()+o}}function so(e){return function(t){return Kt(Ec(gc(t).replace(vt,"")),e,"")}}function lo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=pr(e.prototype),r=e.apply(n,t);return Ru(r)?r:n}}function fo(e){return function(t,r,i){var o=tt(t);if(!yu(t)){var a=Oo(r,3);t=ic(t),r=function(e){return a(o[e],e,o)}}var u=e(t,r,i);return u>-1?o[a?t[u]:u]:n}}function ho(e){return No(function(t){var r=t.length,i=r,a=gr.prototype.thru;for(e&&t.reverse();i--;){var u=t[i];if("function"!=typeof u)throw new it(o);if(a&&!c&&"wrapper"==Do(u))var c=new gr([],!0)}for(i=c?i:r;++i<r;){var s=Do(u=t[i]),l="wrapper"==s?ko(u):n;c=l&&Xo(l[0])&&l[1]==(w|m|y|x)&&!l[4].length&&1==l[9]?c[Do(l[0])].apply(c,l[3]):1==u.length&&Xo(u)?c[s]():c.thru(u)}return function(){var e=arguments,n=e[0];if(c&&1==e.length&&mu(n))return c.plant(n).value();for(var i=0,o=r?t[i].apply(this,e):n;++i<r;)o=t[i].call(this,o);return o}})}function po(e,t,r,i,o,a,u,c,s,l){var f=t&w,h=t&p,d=t&v,g=t&(m|_),y=t&T,b=d?n:lo(e);return function p(){for(var v=arguments.length,m=Ze(v),_=v;_--;)m[_]=arguments[_];if(g)var w=Io(p),x=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(m,w);if(i&&(m=eo(m,i,o,g)),a&&(m=to(m,a,u,g)),v-=x,g&&v<l){var T=An(m,w);return wo(e,t,po,p.placeholder,r,m,T,c,s,l-v)}var E=h?r:this,A=d?E[e]:e;return v=m.length,c?m=function(e,t){for(var r=e.length,i=Vn(t.length,r),o=no(e);i--;){var a=t[i];e[i]=Vo(a,r)?o[a]:n}return e}(m,c):y&&v>1&&m.reverse(),f&&s<v&&(m.length=s),this&&this!==Nt&&this instanceof p&&(A=b||lo(A)),A.apply(E,m)}}function vo(e,t){return function(n,r){return function(e,t,n,r){return qr(e,function(e,i,o){t(r,n(e),i,o)}),r}(n,e,t(r),{})}}function go(e,t){return function(r,i){var o;if(r===n&&i===n)return t;if(r!==n&&(o=r),i!==n){if(o===n)return i;"string"==typeof r||"string"==typeof i?(r=Oi(r),i=Oi(i)):(r=Ii(r),i=Ii(i)),o=e(r,i)}return o}}function mo(e){return No(function(t){return t=Zt(t,pn(Oo())),Ti(function(n){var r=this;return e(t,function(e){return Wt(e,r,n)})})})}function _o(e,t){var r=(t=t===n?" ":Oi(t)).length;if(r<2)return r?xi(t,e):t;var i=xi(t,Pn(e/Mn(t)));return xn(t)?Gi(Cn(i),0,e).join(""):i.slice(0,e)}function yo(e){return function(t,r,i){return i&&"number"!=typeof i&&qo(t,r,i)&&(r=i=n),t=ju(t),r===n?(r=t,t=0):r=ju(r),function(e,t,n,r){for(var i=-1,o=Bn(Pn((t-e)/(n||1)),0),a=Ze(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,r,i=i===n?t<r?1:-1:ju(i),e)}}function bo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=zu(t),n=zu(n)),e(t,n)}}function wo(e,t,r,i,o,a,u,c,s,l){var f=t&m;t|=f?y:b,(t&=~(f?b:y))&g||(t&=~(p|v));var h=[e,t,o,f?a:n,f?u:n,f?n:a,f?n:u,c,s,l],d=r.apply(n,h);return Xo(e)&&ra(d,h),d.placeholder=i,aa(d,e,t)}function xo(e){var t=et[e];return function(e,n){if(e=zu(e),(n=null==n?0:Vn(Yu(n),292))&&Wn(e)){var r=(Bu(e)+"e").split("e");return+((r=(Bu(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var To=er&&1/Sn(new er([,-0]))[1]==N?function(e){return new er(e)}:Ic;function Eo(e){return function(t){var n=Wo(t);return n==q?Tn(t):n==J?Rn(t):function(e,t){return Zt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ao(e,t,r,i,a,u,s,l){var f=t&v;if(!f&&"function"!=typeof e)throw new it(o);var h=i?i.length:0;if(h||(t&=~(y|b),i=a=n),s=s===n?s:Bn(Yu(s),0),l=l===n?l:Yu(l),h-=a?a.length:0,t&b){var d=i,T=a;i=a=n}var E=f?n:ko(e),A=[e,t,r,i,a,d,T,u,s,l];if(E&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<(p|v|w),a=r==w&&n==m||r==w&&n==x&&e[7].length<=t[8]||r==(w|x)&&t[7].length<=t[8]&&n==m;if(!o&&!a)return e;r&p&&(e[2]=t[2],i|=n&p?0:g);var u=t[3];if(u){var s=e[3];e[3]=s?eo(s,u,t[4]):u,e[4]=s?An(e[3],c):t[4]}(u=t[5])&&(s=e[5],e[5]=s?to(s,u,t[6]):u,e[6]=s?An(e[5],c):t[6]),(u=t[7])&&(e[7]=u),r&w&&(e[8]=null==e[8]?t[8]:Vn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(A,E),e=A[0],t=A[1],r=A[2],i=A[3],a=A[4],!(l=A[9]=A[9]===n?f?0:e.length:Bn(A[9]-h,0))&&t&(m|_)&&(t&=~(m|_)),t&&t!=p)S=t==m||t==_?function(e,t,r){var i=lo(e);return function o(){for(var a=arguments.length,u=Ze(a),c=a,s=Io(o);c--;)u[c]=arguments[c];var l=a<3&&u[0]!==s&&u[a-1]!==s?[]:An(u,s);return(a-=l.length)<r?wo(e,t,po,o.placeholder,n,u,l,n,n,r-a):Wt(this&&this!==Nt&&this instanceof o?i:e,this,u)}}(e,t,l):t!=y&&t!=(p|y)||a.length?po.apply(n,A):function(e,t,n,r){var i=t&p,o=lo(e);return function t(){for(var a=-1,u=arguments.length,c=-1,s=r.length,l=Ze(s+u),f=this&&this!==Nt&&this instanceof t?o:e;++c<s;)l[c]=r[c];for(;u--;)l[c++]=arguments[++a];return Wt(f,i?n:this,l)}}(e,t,r,i);else var S=function(e,t,n){var r=t&p,i=lo(e);return function t(){return(this&&this!==Nt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return aa((E?Ri:ra)(S,A),e,t)}function So(e,t,r,i){return e===n||du(e,ut[r])&&!lt.call(i,r)?t:e}function Ro(e,t,r,i,o,a){return Ru(e)&&Ru(t)&&(a.set(t,e),vi(e,t,n,Ro,a),a.delete(t)),e}function Mo(e){return Lu(e)?n:e}function Co(e,t,r,i,o,a){var u=r&h,c=e.length,s=t.length;if(c!=s&&!(u&&s>c))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var f=-1,p=!0,v=r&d?new wr:n;for(a.set(e,t),a.set(t,e);++f<c;){var g=e[f],m=t[f];if(i)var _=u?i(m,g,f,t,e,a):i(g,m,f,e,t,a);if(_!==n){if(_)continue;p=!1;break}if(v){if(!en(t,function(e,t){if(!gn(v,t)&&(g===e||o(g,e,r,i,a)))return v.push(t)})){p=!1;break}}else if(g!==m&&!o(g,m,r,i,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function No(e){return oa(ea(e,n,_a),e+"")}function Lo(e){return Qr(e,ic,jo)}function $o(e){return Qr(e,oc,Yo)}var ko=rr?function(e){return rr.get(e)}:Ic;function Do(e){for(var t=e.name+"",n=ir[t],r=lt.call(ir,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Io(e){return(lt.call(dr,"placeholder")?dr:e).placeholder}function Oo(){var e=dr.iteratee||Lc;return e=e===Lc?ci:e,arguments.length?e(arguments[0],arguments[1]):e}function Fo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Po(e){for(var t=ic(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ko(i)]}return t}function Uo(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return ui(r)?r:n}var jo=jn?function(e){return null==e?[]:(e=tt(e),qt(jn(e),function(t){return It.call(e,t)}))}:Wc,Yo=jn?function(e){for(var t=[];e;)Qt(t,jo(e)),e=$t(e);return t}:Wc,Wo=Kr;function zo(e,t,n){for(var r=-1,i=(t=Vi(t,e)).length,o=!1;++r<i;){var a=la(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Su(i)&&Vo(a,i)&&(mu(e)||gu(e))}function Ho(e){return"function"!=typeof e.constructor||Qo(e)?{}:pr($t(e))}function Bo(e){return mu(e)||gu(e)||!!(ln&&e&&e[ln])}function Vo(e,t){var n=typeof e;return!!(t=null==t?L:t)&&("number"==n||"symbol"!=n&&Be.test(e))&&e>-1&&e%1==0&&e<t}function qo(e,t,n){if(!Ru(n))return!1;var r=typeof t;return!!("number"==r?yu(n)&&Vo(t,n.length):"string"==r&&t in n)&&du(n[t],e)}function Go(e,t){if(mu(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Iu(e))||Re.test(e)||!Se.test(e)||null!=t&&e in tt(t)}function Xo(e){var t=Do(e),n=dr[t];if("function"!=typeof n||!(t in mr.prototype))return!1;if(e===n)return!0;var r=ko(n);return!!r&&e===r[0]}(Qn&&Wo(new Qn(new ArrayBuffer(1)))!=ae||Kn&&Wo(new Kn)!=q||Jn&&"[object Promise]"!=Wo(Jn.resolve())||er&&Wo(new er)!=J||tr&&Wo(new tr)!=re)&&(Wo=function(e){var t=Kr(e),r=t==Z?e.constructor:n,i=r?fa(r):"";if(i)switch(i){case or:return ae;case ar:return q;case ur:return"[object Promise]";case cr:return J;case sr:return re}return t});var Zo=ct?Eu:zc;function Qo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ut)}function Ko(e){return e==e&&!Ru(e)}function Jo(e,t){return function(r){return null!=r&&r[e]===t&&(t!==n||e in tt(r))}}function ea(e,t,r){return t=Bn(t===n?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=Bn(n.length-t,0),a=Ze(o);++i<o;)a[i]=n[t+i];i=-1;for(var u=Ze(t+1);++i<t;)u[i]=n[i];return u[t]=r(a),Wt(e,this,u)}}function ta(e,t){return t.length<2?e:Zr(e,Ni(t,0,-1))}function na(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ra=ua(Ri),ia=Fn||function(e,t){return Nt.setTimeout(e,t)},oa=ua(Mi);function aa(e,t,n){var r=t+"";return oa(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(De,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ht(F,function(n){var r="_."+n[0];t&n[1]&&!Gt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(Ie);return t?t[1].split(Oe):[]}(r),n)))}function ua(e){var t=0,r=0;return function(){var i=qn(),o=R-(i-r);if(r=i,o>0){if(++t>=S)return arguments[0]}else t=0;return e.apply(n,arguments)}}function ca(e,t){var r=-1,i=e.length,o=i-1;for(t=t===n?i:t;++r<t;){var a=wi(r,o),u=e[a];e[a]=e[r],e[r]=u}return e.length=t,e}var sa=function(e){var t=uu(e,function(e){return n.size===u&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Me,function(e,n,r,i){t.push(r?i.replace(Pe,"$1"):n||e)}),t});function la(e){if("string"==typeof e||Iu(e))return e;var t=e+"";return"0"==t&&1/e==-N?"-0":t}function fa(e){if(null!=e){try{return st.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ha(e){if(e instanceof mr)return e.clone();var t=new gr(e.__wrapped__,e.__chain__);return t.__actions__=no(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var da=Ti(function(e,t){return bu(e)?Pr(e,Hr(t,1,bu,!0)):[]}),pa=Ti(function(e,t){var r=Ta(t);return bu(r)&&(r=n),bu(e)?Pr(e,Hr(t,1,bu,!0),Oo(r,2)):[]}),va=Ti(function(e,t){var r=Ta(t);return bu(r)&&(r=n),bu(e)?Pr(e,Hr(t,1,bu,!0),n,r):[]});function ga(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Yu(n);return i<0&&(i=Bn(r+i,0)),rn(e,Oo(t,3),i)}function ma(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return r!==n&&(o=Yu(r),o=r<0?Bn(i+o,0):Vn(o,i-1)),rn(e,Oo(t,3),o,!0)}function _a(e){return null!=e&&e.length?Hr(e,1):[]}function ya(e){return e&&e.length?e[0]:n}var ba=Ti(function(e){var t=Zt(e,Hi);return t.length&&t[0]===e[0]?ni(t):[]}),wa=Ti(function(e){var t=Ta(e),r=Zt(e,Hi);return t===Ta(r)?t=n:r.pop(),r.length&&r[0]===e[0]?ni(r,Oo(t,2)):[]}),xa=Ti(function(e){var t=Ta(e),r=Zt(e,Hi);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?ni(r,n,t):[]});function Ta(e){var t=null==e?0:e.length;return t?e[t-1]:n}var Ea=Ti(Aa);function Aa(e,t){return e&&e.length&&t&&t.length?yi(e,t):e}var Sa=No(function(e,t){var n=null==e?0:e.length,r=kr(e,t);return bi(e,Zt(t,function(e){return Vo(e,n)?+e:e}).sort(Ji)),r});function Ra(e){return null==e?e:Zn.call(e)}var Ma=Ti(function(e){return Fi(Hr(e,1,bu,!0))}),Ca=Ti(function(e){var t=Ta(e);return bu(t)&&(t=n),Fi(Hr(e,1,bu,!0),Oo(t,2))}),Na=Ti(function(e){var t=Ta(e);return t="function"==typeof t?t:n,Fi(Hr(e,1,bu,!0),n,t)});function La(e){if(!e||!e.length)return[];var t=0;return e=qt(e,function(e){if(bu(e))return t=Bn(e.length,t),!0}),dn(t,function(t){return Zt(e,sn(t))})}function $a(e,t){if(!e||!e.length)return[];var r=La(e);return null==t?r:Zt(r,function(e){return Wt(t,n,e)})}var ka=Ti(function(e,t){return bu(e)?Pr(e,t):[]}),Da=Ti(function(e){return Wi(qt(e,bu))}),Ia=Ti(function(e){var t=Ta(e);return bu(t)&&(t=n),Wi(qt(e,bu),Oo(t,2))}),Oa=Ti(function(e){var t=Ta(e);return t="function"==typeof t?t:n,Wi(qt(e,bu),n,t)}),Fa=Ti(La);var Pa=Ti(function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,$a(e,r)});function Ua(e){var t=dr(e);return t.__chain__=!0,t}function ja(e,t){return t(e)}var Ya=No(function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,o=function(t){return kr(t,e)};return!(t>1||this.__actions__.length)&&i instanceof mr&&Vo(r)?((i=i.slice(r,+r+(t?1:0))).__actions__.push({func:ja,args:[o],thisArg:n}),new gr(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(n),e})):this.thru(o)});var Wa=io(function(e,t,n){lt.call(e,n)?++e[n]:$r(e,n,1)});var za=fo(ga),Ha=fo(ma);function Ba(e,t){return(mu(e)?Ht:Ur)(e,Oo(t,3))}function Va(e,t){return(mu(e)?Bt:jr)(e,Oo(t,3))}var qa=io(function(e,t,n){lt.call(e,n)?e[n].push(t):$r(e,n,[t])});var Ga=Ti(function(e,t,n){var r=-1,i="function"==typeof t,o=yu(e)?Ze(e.length):[];return Ur(e,function(e){o[++r]=i?Wt(t,e,n):ri(e,t,n)}),o}),Xa=io(function(e,t,n){$r(e,n,t)});function Za(e,t){return(mu(e)?Zt:hi)(e,Oo(t,3))}var Qa=io(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var Ka=Ti(function(e,t){if(null==e)return[];var n=t.length;return n>1&&qo(e,t[0],t[1])?t=[]:n>2&&qo(t[0],t[1],t[2])&&(t=[t[0]]),mi(e,Hr(t,1),[])}),Ja=On||function(){return Nt.Date.now()};function eu(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,Ao(e,w,n,n,n,n,t)}function tu(e,t){var r;if("function"!=typeof t)throw new it(o);return e=Yu(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var nu=Ti(function(e,t,n){var r=p;if(n.length){var i=An(n,Io(nu));r|=y}return Ao(e,r,t,n,i)}),ru=Ti(function(e,t,n){var r=p|v;if(n.length){var i=An(n,Io(ru));r|=y}return Ao(t,r,e,n,i)});function iu(e,t,r){var i,a,u,c,s,l,f=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new it(o);function v(t){var r=i,o=a;return i=a=n,f=t,c=e.apply(o,r)}function g(e){var r=e-l;return l===n||r>=t||r<0||d&&e-f>=u}function m(){var e=Ja();if(g(e))return _(e);s=ia(m,function(e){var n=t-(e-l);return d?Vn(n,u-(e-f)):n}(e))}function _(e){return s=n,p&&i?v(e):(i=a=n,c)}function y(){var e=Ja(),r=g(e);if(i=arguments,a=this,l=e,r){if(s===n)return function(e){return f=e,s=ia(m,t),h?v(e):c}(l);if(d)return Xi(s),s=ia(m,t),v(l)}return s===n&&(s=ia(m,t)),c}return t=zu(t)||0,Ru(r)&&(h=!!r.leading,u=(d="maxWait"in r)?Bn(zu(r.maxWait)||0,t):u,p="trailing"in r?!!r.trailing:p),y.cancel=function(){s!==n&&Xi(s),f=0,i=l=a=s=n},y.flush=function(){return s===n?c:_(Ja())},y}var ou=Ti(function(e,t){return Fr(e,1,t)}),au=Ti(function(e,t,n){return Fr(e,zu(t)||0,n)});function uu(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new it(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(uu.Cache||br),n}function cu(e){if("function"!=typeof e)throw new it(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}uu.Cache=br;var su=qi(function(e,t){var n=(t=1==t.length&&mu(t[0])?Zt(t[0],pn(Oo())):Zt(Hr(t,1),pn(Oo()))).length;return Ti(function(r){for(var i=-1,o=Vn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Wt(e,this,r)})}),lu=Ti(function(e,t){var r=An(t,Io(lu));return Ao(e,y,n,t,r)}),fu=Ti(function(e,t){var r=An(t,Io(fu));return Ao(e,b,n,t,r)}),hu=No(function(e,t){return Ao(e,x,n,n,n,t)});function du(e,t){return e===t||e!=e&&t!=t}var pu=bo(Jr),vu=bo(function(e,t){return e>=t}),gu=ii(function(){return arguments}())?ii:function(e){return Mu(e)&&lt.call(e,"callee")&&!It.call(e,"callee")},mu=Ze.isArray,_u=Ot?pn(Ot):function(e){return Mu(e)&&Kr(e)==oe};function yu(e){return null!=e&&Su(e.length)&&!Eu(e)}function bu(e){return Mu(e)&&yu(e)}var wu=Yn||zc,xu=Ft?pn(Ft):function(e){return Mu(e)&&Kr(e)==W};function Tu(e){if(!Mu(e))return!1;var t=Kr(e);return t==H||t==z||"string"==typeof e.message&&"string"==typeof e.name&&!Lu(e)}function Eu(e){if(!Ru(e))return!1;var t=Kr(e);return t==B||t==V||t==j||t==Q}function Au(e){return"number"==typeof e&&e==Yu(e)}function Su(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=L}function Ru(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Mu(e){return null!=e&&"object"==typeof e}var Cu=Pt?pn(Pt):function(e){return Mu(e)&&Wo(e)==q};function Nu(e){return"number"==typeof e||Mu(e)&&Kr(e)==G}function Lu(e){if(!Mu(e)||Kr(e)!=Z)return!1;var t=$t(e);if(null===t)return!0;var n=lt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&st.call(n)==pt}var $u=Ut?pn(Ut):function(e){return Mu(e)&&Kr(e)==K};var ku=jt?pn(jt):function(e){return Mu(e)&&Wo(e)==J};function Du(e){return"string"==typeof e||!mu(e)&&Mu(e)&&Kr(e)==ee}function Iu(e){return"symbol"==typeof e||Mu(e)&&Kr(e)==te}var Ou=Yt?pn(Yt):function(e){return Mu(e)&&Su(e.length)&&!!Tt[Kr(e)]};var Fu=bo(fi),Pu=bo(function(e,t){return e<=t});function Uu(e){if(!e)return[];if(yu(e))return Du(e)?Cn(e):no(e);if($n&&e[$n])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[$n]());var t=Wo(e);return(t==q?Tn:t==J?Sn:dc)(e)}function ju(e){return e?(e=zu(e))===N||e===-N?(e<0?-1:1)*$:e==e?e:0:0===e?e:0}function Yu(e){var t=ju(e),n=t%1;return t==t?n?t-n:t:0}function Wu(e){return e?Dr(Yu(e),0,D):0}function zu(e){if("number"==typeof e)return e;if(Iu(e))return k;if(Ru(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ru(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Le,"");var n=We.test(e);return n||He.test(e)?Rt(e.slice(2),n?2:8):Ye.test(e)?k:+e}function Hu(e){return ro(e,oc(e))}function Bu(e){return null==e?"":Oi(e)}var Vu=oo(function(e,t){if(Qo(t)||yu(t))ro(t,ic(t),e);else for(var n in t)lt.call(t,n)&&Mr(e,n,t[n])}),qu=oo(function(e,t){ro(t,oc(t),e)}),Gu=oo(function(e,t,n,r){ro(t,oc(t),e,r)}),Xu=oo(function(e,t,n,r){ro(t,ic(t),e,r)}),Zu=No(kr);var Qu=Ti(function(e,t){e=tt(e);var r=-1,i=t.length,o=i>2?t[2]:n;for(o&&qo(t[0],t[1],o)&&(i=1);++r<i;)for(var a=t[r],u=oc(a),c=-1,s=u.length;++c<s;){var l=u[c],f=e[l];(f===n||du(f,ut[l])&&!lt.call(e,l))&&(e[l]=a[l])}return e}),Ku=Ti(function(e){return e.push(n,Ro),Wt(uc,n,e)});function Ju(e,t,r){var i=null==e?n:Zr(e,t);return i===n?r:i}function ec(e,t){return null!=e&&zo(e,t,ti)}var tc=vo(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=dt.call(t)),e[t]=n},Rc(Nc)),nc=vo(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=dt.call(t)),lt.call(e,t)?e[t].push(n):e[t]=[n]},Oo),rc=Ti(ri);function ic(e){return yu(e)?Tr(e):si(e)}function oc(e){return yu(e)?Tr(e,!0):li(e)}var ac=oo(function(e,t,n){vi(e,t,n)}),uc=oo(function(e,t,n,r){vi(e,t,n,r)}),cc=No(function(e,t){var n={};if(null==e)return n;var r=!1;t=Zt(t,function(t){return t=Vi(t,e),r||(r=t.length>1),t}),ro(e,$o(e),n),r&&(n=Ir(n,s|l|f,Mo));for(var i=t.length;i--;)Pi(n,t[i]);return n});var sc=No(function(e,t){return null==e?{}:function(e,t){return _i(e,t,function(t,n){return ec(e,n)})}(e,t)});function lc(e,t){if(null==e)return{};var n=Zt($o(e),function(e){return[e]});return t=Oo(t),_i(e,n,function(e,n){return t(e,n[0])})}var fc=Eo(ic),hc=Eo(oc);function dc(e){return null==e?[]:vn(e,ic(e))}var pc=so(function(e,t,n){return t=t.toLowerCase(),e+(n?vc(t):t)});function vc(e){return Tc(Bu(e).toLowerCase())}function gc(e){return(e=Bu(e))&&e.replace(Ve,yn).replace(gt,"")}var mc=so(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),_c=so(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),yc=co("toLowerCase");var bc=so(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});var wc=so(function(e,t,n){return e+(n?" ":"")+Tc(t)});var xc=so(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Tc=co("toUpperCase");function Ec(e,t,r){return e=Bu(e),(t=r?n:t)===n?function(e){return bt.test(e)}(e)?function(e){return e.match(_t)||[]}(e):function(e){return e.match(Fe)||[]}(e):e.match(t)||[]}var Ac=Ti(function(e,t){try{return Wt(e,n,t)}catch(e){return Tu(e)?e:new Ke(e)}}),Sc=No(function(e,t){return Ht(t,function(t){t=la(t),$r(e,t,nu(e[t],e))}),e});function Rc(e){return function(){return e}}var Mc=ho(),Cc=ho(!0);function Nc(e){return e}function Lc(e){return ci("function"==typeof e?e:Ir(e,s))}var $c=Ti(function(e,t){return function(n){return ri(n,e,t)}}),kc=Ti(function(e,t){return function(n){return ri(e,n,t)}});function Dc(e,t,n){var r=ic(t),i=Xr(t,r);null!=n||Ru(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Xr(t,ic(t)));var o=!(Ru(n)&&"chain"in n&&!n.chain),a=Eu(e);return Ht(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=no(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Qt([this.value()],arguments))})}),e}function Ic(){}var Oc=mo(Zt),Fc=mo(Vt),Pc=mo(en);function Uc(e){return Go(e)?sn(la(e)):function(e){return function(t){return Zr(t,e)}}(e)}var jc=yo(),Yc=yo(!0);function Wc(){return[]}function zc(){return!1}var Hc=go(function(e,t){return e+t},0),Bc=xo("ceil"),Vc=go(function(e,t){return e/t},1),qc=xo("floor");var Gc,Xc=go(function(e,t){return e*t},1),Zc=xo("round"),Qc=go(function(e,t){return e-t},0);return dr.after=function(e,t){if("function"!=typeof t)throw new it(o);return e=Yu(e),function(){if(--e<1)return t.apply(this,arguments)}},dr.ary=eu,dr.assign=Vu,dr.assignIn=qu,dr.assignInWith=Gu,dr.assignWith=Xu,dr.at=Zu,dr.before=tu,dr.bind=nu,dr.bindAll=Sc,dr.bindKey=ru,dr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return mu(e)?e:[e]},dr.chain=Ua,dr.chunk=function(e,t,r){t=(r?qo(e,t,r):t===n)?1:Bn(Yu(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,u=Ze(Pn(i/t));o<i;)u[a++]=Ni(e,o,o+=t);return u},dr.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},dr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Ze(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Qt(mu(n)?no(n):[n],Hr(t,1))},dr.cond=function(e){var t=null==e?0:e.length,n=Oo();return e=t?Zt(e,function(e){if("function"!=typeof e[1])throw new it(o);return[n(e[0]),e[1]]}):[],Ti(function(n){for(var r=-1;++r<t;){var i=e[r];if(Wt(i[0],this,n))return Wt(i[1],this,n)}})},dr.conforms=function(e){return function(e){var t=ic(e);return function(n){return Or(n,e,t)}}(Ir(e,s))},dr.constant=Rc,dr.countBy=Wa,dr.create=function(e,t){var n=pr(e);return null==t?n:Lr(n,t)},dr.curry=function e(t,r,i){var o=Ao(t,m,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},dr.curryRight=function e(t,r,i){var o=Ao(t,_,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},dr.debounce=iu,dr.defaults=Qu,dr.defaultsDeep=Ku,dr.defer=ou,dr.delay=au,dr.difference=da,dr.differenceBy=pa,dr.differenceWith=va,dr.drop=function(e,t,r){var i=null==e?0:e.length;return i?Ni(e,(t=r||t===n?1:Yu(t))<0?0:t,i):[]},dr.dropRight=function(e,t,r){var i=null==e?0:e.length;return i?Ni(e,0,(t=i-(t=r||t===n?1:Yu(t)))<0?0:t):[]},dr.dropRightWhile=function(e,t){return e&&e.length?ji(e,Oo(t,3),!0,!0):[]},dr.dropWhile=function(e,t){return e&&e.length?ji(e,Oo(t,3),!0):[]},dr.fill=function(e,t,r,i){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&qo(e,t,r)&&(r=0,i=o),function(e,t,r,i){var o=e.length;for((r=Yu(r))<0&&(r=-r>o?0:o+r),(i=i===n||i>o?o:Yu(i))<0&&(i+=o),i=r>i?0:Wu(i);r<i;)e[r++]=t;return e}(e,t,r,i)):[]},dr.filter=function(e,t){return(mu(e)?qt:zr)(e,Oo(t,3))},dr.flatMap=function(e,t){return Hr(Za(e,t),1)},dr.flatMapDeep=function(e,t){return Hr(Za(e,t),N)},dr.flatMapDepth=function(e,t,r){return r=r===n?1:Yu(r),Hr(Za(e,t),r)},dr.flatten=_a,dr.flattenDeep=function(e){return null!=e&&e.length?Hr(e,N):[]},dr.flattenDepth=function(e,t){return null!=e&&e.length?Hr(e,t=t===n?1:Yu(t)):[]},dr.flip=function(e){return Ao(e,T)},dr.flow=Mc,dr.flowRight=Cc,dr.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},dr.functions=function(e){return null==e?[]:Xr(e,ic(e))},dr.functionsIn=function(e){return null==e?[]:Xr(e,oc(e))},dr.groupBy=qa,dr.initial=function(e){return null!=e&&e.length?Ni(e,0,-1):[]},dr.intersection=ba,dr.intersectionBy=wa,dr.intersectionWith=xa,dr.invert=tc,dr.invertBy=nc,dr.invokeMap=Ga,dr.iteratee=Lc,dr.keyBy=Xa,dr.keys=ic,dr.keysIn=oc,dr.map=Za,dr.mapKeys=function(e,t){var n={};return t=Oo(t,3),qr(e,function(e,r,i){$r(n,t(e,r,i),e)}),n},dr.mapValues=function(e,t){var n={};return t=Oo(t,3),qr(e,function(e,r,i){$r(n,r,t(e,r,i))}),n},dr.matches=function(e){return di(Ir(e,s))},dr.matchesProperty=function(e,t){return pi(e,Ir(t,s))},dr.memoize=uu,dr.merge=ac,dr.mergeWith=uc,dr.method=$c,dr.methodOf=kc,dr.mixin=Dc,dr.negate=cu,dr.nthArg=function(e){return e=Yu(e),Ti(function(t){return gi(t,e)})},dr.omit=cc,dr.omitBy=function(e,t){return lc(e,cu(Oo(t)))},dr.once=function(e){return tu(2,e)},dr.orderBy=function(e,t,r,i){return null==e?[]:(mu(t)||(t=null==t?[]:[t]),mu(r=i?n:r)||(r=null==r?[]:[r]),mi(e,t,r))},dr.over=Oc,dr.overArgs=su,dr.overEvery=Fc,dr.overSome=Pc,dr.partial=lu,dr.partialRight=fu,dr.partition=Qa,dr.pick=sc,dr.pickBy=lc,dr.property=Uc,dr.propertyOf=function(e){return function(t){return null==e?n:Zr(e,t)}},dr.pull=Ea,dr.pullAll=Aa,dr.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?yi(e,t,Oo(n,2)):e},dr.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?yi(e,t,n,r):e},dr.pullAt=Sa,dr.range=jc,dr.rangeRight=Yc,dr.rearg=hu,dr.reject=function(e,t){return(mu(e)?qt:zr)(e,cu(Oo(t,3)))},dr.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Oo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return bi(e,i),n},dr.rest=function(e,t){if("function"!=typeof e)throw new it(o);return Ti(e,t=t===n?t:Yu(t))},dr.reverse=Ra,dr.sampleSize=function(e,t,r){return t=(r?qo(e,t,r):t===n)?1:Yu(t),(mu(e)?Ar:Ai)(e,t)},dr.set=function(e,t,n){return null==e?e:Si(e,t,n)},dr.setWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:Si(e,t,r,i)},dr.shuffle=function(e){return(mu(e)?Sr:Ci)(e)},dr.slice=function(e,t,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&qo(e,t,r)?(t=0,r=i):(t=null==t?0:Yu(t),r=r===n?i:Yu(r)),Ni(e,t,r)):[]},dr.sortBy=Ka,dr.sortedUniq=function(e){return e&&e.length?Di(e):[]},dr.sortedUniqBy=function(e,t){return e&&e.length?Di(e,Oo(t,2)):[]},dr.split=function(e,t,r){return r&&"number"!=typeof r&&qo(e,t,r)&&(t=r=n),(r=r===n?D:r>>>0)?(e=Bu(e))&&("string"==typeof t||null!=t&&!$u(t))&&!(t=Oi(t))&&xn(e)?Gi(Cn(e),0,r):e.split(t,r):[]},dr.spread=function(e,t){if("function"!=typeof e)throw new it(o);return t=null==t?0:Bn(Yu(t),0),Ti(function(n){var r=n[t],i=Gi(n,0,t);return r&&Qt(i,r),Wt(e,this,i)})},dr.tail=function(e){var t=null==e?0:e.length;return t?Ni(e,1,t):[]},dr.take=function(e,t,r){return e&&e.length?Ni(e,0,(t=r||t===n?1:Yu(t))<0?0:t):[]},dr.takeRight=function(e,t,r){var i=null==e?0:e.length;return i?Ni(e,(t=i-(t=r||t===n?1:Yu(t)))<0?0:t,i):[]},dr.takeRightWhile=function(e,t){return e&&e.length?ji(e,Oo(t,3),!1,!0):[]},dr.takeWhile=function(e,t){return e&&e.length?ji(e,Oo(t,3)):[]},dr.tap=function(e,t){return t(e),e},dr.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new it(o);return Ru(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),iu(e,t,{leading:r,maxWait:t,trailing:i})},dr.thru=ja,dr.toArray=Uu,dr.toPairs=fc,dr.toPairsIn=hc,dr.toPath=function(e){return mu(e)?Zt(e,la):Iu(e)?[e]:no(sa(Bu(e)))},dr.toPlainObject=Hu,dr.transform=function(e,t,n){var r=mu(e),i=r||wu(e)||Ou(e);if(t=Oo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Ru(e)&&Eu(o)?pr($t(e)):{}}return(i?Ht:qr)(e,function(e,r,i){return t(n,e,r,i)}),n},dr.unary=function(e){return eu(e,1)},dr.union=Ma,dr.unionBy=Ca,dr.unionWith=Na,dr.uniq=function(e){return e&&e.length?Fi(e):[]},dr.uniqBy=function(e,t){return e&&e.length?Fi(e,Oo(t,2)):[]},dr.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?Fi(e,n,t):[]},dr.unset=function(e,t){return null==e||Pi(e,t)},dr.unzip=La,dr.unzipWith=$a,dr.update=function(e,t,n){return null==e?e:Ui(e,t,Bi(n))},dr.updateWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:Ui(e,t,Bi(r),i)},dr.values=dc,dr.valuesIn=function(e){return null==e?[]:vn(e,oc(e))},dr.without=ka,dr.words=Ec,dr.wrap=function(e,t){return lu(Bi(t),e)},dr.xor=Da,dr.xorBy=Ia,dr.xorWith=Oa,dr.zip=Fa,dr.zipObject=function(e,t){return zi(e||[],t||[],Mr)},dr.zipObjectDeep=function(e,t){return zi(e||[],t||[],Si)},dr.zipWith=Pa,dr.entries=fc,dr.entriesIn=hc,dr.extend=qu,dr.extendWith=Gu,Dc(dr,dr),dr.add=Hc,dr.attempt=Ac,dr.camelCase=pc,dr.capitalize=vc,dr.ceil=Bc,dr.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=zu(r))==r?r:0),t!==n&&(t=(t=zu(t))==t?t:0),Dr(zu(e),t,r)},dr.clone=function(e){return Ir(e,f)},dr.cloneDeep=function(e){return Ir(e,s|f)},dr.cloneDeepWith=function(e,t){return Ir(e,s|f,t="function"==typeof t?t:n)},dr.cloneWith=function(e,t){return Ir(e,f,t="function"==typeof t?t:n)},dr.conformsTo=function(e,t){return null==t||Or(e,t,ic(t))},dr.deburr=gc,dr.defaultTo=function(e,t){return null==e||e!=e?t:e},dr.divide=Vc,dr.endsWith=function(e,t,r){e=Bu(e),t=Oi(t);var i=e.length,o=r=r===n?i:Dr(Yu(r),0,i);return(r-=t.length)>=0&&e.slice(r,o)==t},dr.eq=du,dr.escape=function(e){return(e=Bu(e))&&xe.test(e)?e.replace(be,bn):e},dr.escapeRegExp=function(e){return(e=Bu(e))&&Ne.test(e)?e.replace(Ce,"\\$&"):e},dr.every=function(e,t,r){var i=mu(e)?Vt:Yr;return r&&qo(e,t,r)&&(t=n),i(e,Oo(t,3))},dr.find=za,dr.findIndex=ga,dr.findKey=function(e,t){return nn(e,Oo(t,3),qr)},dr.findLast=Ha,dr.findLastIndex=ma,dr.findLastKey=function(e,t){return nn(e,Oo(t,3),Gr)},dr.floor=qc,dr.forEach=Ba,dr.forEachRight=Va,dr.forIn=function(e,t){return null==e?e:Br(e,Oo(t,3),oc)},dr.forInRight=function(e,t){return null==e?e:Vr(e,Oo(t,3),oc)},dr.forOwn=function(e,t){return e&&qr(e,Oo(t,3))},dr.forOwnRight=function(e,t){return e&&Gr(e,Oo(t,3))},dr.get=Ju,dr.gt=pu,dr.gte=vu,dr.has=function(e,t){return null!=e&&zo(e,t,ei)},dr.hasIn=ec,dr.head=ya,dr.identity=Nc,dr.includes=function(e,t,n,r){e=yu(e)?e:dc(e),n=n&&!r?Yu(n):0;var i=e.length;return n<0&&(n=Bn(i+n,0)),Du(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&on(e,t,n)>-1},dr.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Yu(n);return i<0&&(i=Bn(r+i,0)),on(e,t,i)},dr.inRange=function(e,t,r){return t=ju(t),r===n?(r=t,t=0):r=ju(r),function(e,t,n){return e>=Vn(t,n)&&e<Bn(t,n)}(e=zu(e),t,r)},dr.invoke=rc,dr.isArguments=gu,dr.isArray=mu,dr.isArrayBuffer=_u,dr.isArrayLike=yu,dr.isArrayLikeObject=bu,dr.isBoolean=function(e){return!0===e||!1===e||Mu(e)&&Kr(e)==Y},dr.isBuffer=wu,dr.isDate=xu,dr.isElement=function(e){return Mu(e)&&1===e.nodeType&&!Lu(e)},dr.isEmpty=function(e){if(null==e)return!0;if(yu(e)&&(mu(e)||"string"==typeof e||"function"==typeof e.splice||wu(e)||Ou(e)||gu(e)))return!e.length;var t=Wo(e);if(t==q||t==J)return!e.size;if(Qo(e))return!si(e).length;for(var n in e)if(lt.call(e,n))return!1;return!0},dr.isEqual=function(e,t){return oi(e,t)},dr.isEqualWith=function(e,t,r){var i=(r="function"==typeof r?r:n)?r(e,t):n;return i===n?oi(e,t,n,r):!!i},dr.isError=Tu,dr.isFinite=function(e){return"number"==typeof e&&Wn(e)},dr.isFunction=Eu,dr.isInteger=Au,dr.isLength=Su,dr.isMap=Cu,dr.isMatch=function(e,t){return e===t||ai(e,t,Po(t))},dr.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,ai(e,t,Po(t),r)},dr.isNaN=function(e){return Nu(e)&&e!=+e},dr.isNative=function(e){if(Zo(e))throw new Ke(i);return ui(e)},dr.isNil=function(e){return null==e},dr.isNull=function(e){return null===e},dr.isNumber=Nu,dr.isObject=Ru,dr.isObjectLike=Mu,dr.isPlainObject=Lu,dr.isRegExp=$u,dr.isSafeInteger=function(e){return Au(e)&&e>=-L&&e<=L},dr.isSet=ku,dr.isString=Du,dr.isSymbol=Iu,dr.isTypedArray=Ou,dr.isUndefined=function(e){return e===n},dr.isWeakMap=function(e){return Mu(e)&&Wo(e)==re},dr.isWeakSet=function(e){return Mu(e)&&Kr(e)==ie},dr.join=function(e,t){return null==e?"":zn.call(e,t)},dr.kebabCase=mc,dr.last=Ta,dr.lastIndexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i;return r!==n&&(o=(o=Yu(r))<0?Bn(i+o,0):Vn(o,i-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):rn(e,un,o,!0)},dr.lowerCase=_c,dr.lowerFirst=yc,dr.lt=Fu,dr.lte=Pu,dr.max=function(e){return e&&e.length?Wr(e,Nc,Jr):n},dr.maxBy=function(e,t){return e&&e.length?Wr(e,Oo(t,2),Jr):n},dr.mean=function(e){return cn(e,Nc)},dr.meanBy=function(e,t){return cn(e,Oo(t,2))},dr.min=function(e){return e&&e.length?Wr(e,Nc,fi):n},dr.minBy=function(e,t){return e&&e.length?Wr(e,Oo(t,2),fi):n},dr.stubArray=Wc,dr.stubFalse=zc,dr.stubObject=function(){return{}},dr.stubString=function(){return""},dr.stubTrue=function(){return!0},dr.multiply=Xc,dr.nth=function(e,t){return e&&e.length?gi(e,Yu(t)):n},dr.noConflict=function(){return Nt._===this&&(Nt._=mt),this},dr.noop=Ic,dr.now=Ja,dr.pad=function(e,t,n){e=Bu(e);var r=(t=Yu(t))?Mn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return _o(Un(i),n)+e+_o(Pn(i),n)},dr.padEnd=function(e,t,n){e=Bu(e);var r=(t=Yu(t))?Mn(e):0;return t&&r<t?e+_o(t-r,n):e},dr.padStart=function(e,t,n){e=Bu(e);var r=(t=Yu(t))?Mn(e):0;return t&&r<t?_o(t-r,n)+e:e},dr.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Gn(Bu(e).replace($e,""),t||0)},dr.random=function(e,t,r){if(r&&"boolean"!=typeof r&&qo(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=ju(e),t===n?(t=e,e=0):t=ju(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var o=Xn();return Vn(e+o*(t-e+St("1e-"+((o+"").length-1))),t)}return wi(e,t)},dr.reduce=function(e,t,n){var r=mu(e)?Kt:fn,i=arguments.length<3;return r(e,Oo(t,4),n,i,Ur)},dr.reduceRight=function(e,t,n){var r=mu(e)?Jt:fn,i=arguments.length<3;return r(e,Oo(t,4),n,i,jr)},dr.repeat=function(e,t,r){return t=(r?qo(e,t,r):t===n)?1:Yu(t),xi(Bu(e),t)},dr.replace=function(){var e=arguments,t=Bu(e[0]);return e.length<3?t:t.replace(e[1],e[2])},dr.result=function(e,t,r){var i=-1,o=(t=Vi(t,e)).length;for(o||(o=1,e=n);++i<o;){var a=null==e?n:e[la(t[i])];a===n&&(i=o,a=r),e=Eu(a)?a.call(e):a}return e},dr.round=Zc,dr.runInContext=e,dr.sample=function(e){return(mu(e)?Er:Ei)(e)},dr.size=function(e){if(null==e)return 0;if(yu(e))return Du(e)?Mn(e):e.length;var t=Wo(e);return t==q||t==J?e.size:si(e).length},dr.snakeCase=bc,dr.some=function(e,t,r){var i=mu(e)?en:Li;return r&&qo(e,t,r)&&(t=n),i(e,Oo(t,3))},dr.sortedIndex=function(e,t){return $i(e,t)},dr.sortedIndexBy=function(e,t,n){return ki(e,t,Oo(n,2))},dr.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=$i(e,t);if(r<n&&du(e[r],t))return r}return-1},dr.sortedLastIndex=function(e,t){return $i(e,t,!0)},dr.sortedLastIndexBy=function(e,t,n){return ki(e,t,Oo(n,2),!0)},dr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=$i(e,t,!0)-1;if(du(e[n],t))return n}return-1},dr.startCase=wc,dr.startsWith=function(e,t,n){return e=Bu(e),n=null==n?0:Dr(Yu(n),0,e.length),t=Oi(t),e.slice(n,n+t.length)==t},dr.subtract=Qc,dr.sum=function(e){return e&&e.length?hn(e,Nc):0},dr.sumBy=function(e,t){return e&&e.length?hn(e,Oo(t,2)):0},dr.template=function(e,t,r){var i=dr.templateSettings;r&&qo(e,t,r)&&(t=n),e=Bu(e),t=Gu({},t,i,So);var o,a,u=Gu({},t.imports,i.imports,So),c=ic(u),s=vn(u,c),l=0,f=t.interpolate||qe,h="__p += '",d=nt((t.escape||qe).source+"|"+f.source+"|"+(f===Ae?Ue:qe).source+"|"+(t.evaluate||qe).source+"|$","g"),p="//# sourceURL="+(lt.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++xt+"]")+"\n";e.replace(d,function(t,n,r,i,u,c){return r||(r=i),h+=e.slice(l,c).replace(Ge,wn),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),u&&(a=!0,h+="';\n"+u+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t}),h+="';\n";var v=lt.call(t,"variable")&&t.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(ge,""):h).replace(me,"$1").replace(_e,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Ac(function(){return Je(c,p+"return "+h).apply(n,s)});if(g.source=h,Tu(g))throw g;return g},dr.times=function(e,t){if((e=Yu(e))<1||e>L)return[];var n=D,r=Vn(e,D);t=Oo(t),e-=D;for(var i=dn(r,t);++n<e;)t(n);return i},dr.toFinite=ju,dr.toInteger=Yu,dr.toLength=Wu,dr.toLower=function(e){return Bu(e).toLowerCase()},dr.toNumber=zu,dr.toSafeInteger=function(e){return e?Dr(Yu(e),-L,L):0===e?e:0},dr.toString=Bu,dr.toUpper=function(e){return Bu(e).toUpperCase()},dr.trim=function(e,t,r){if((e=Bu(e))&&(r||t===n))return e.replace(Le,"");if(!e||!(t=Oi(t)))return e;var i=Cn(e),o=Cn(t);return Gi(i,mn(i,o),_n(i,o)+1).join("")},dr.trimEnd=function(e,t,r){if((e=Bu(e))&&(r||t===n))return e.replace(ke,"");if(!e||!(t=Oi(t)))return e;var i=Cn(e);return Gi(i,0,_n(i,Cn(t))+1).join("")},dr.trimStart=function(e,t,r){if((e=Bu(e))&&(r||t===n))return e.replace($e,"");if(!e||!(t=Oi(t)))return e;var i=Cn(e);return Gi(i,mn(i,Cn(t))).join("")},dr.truncate=function(e,t){var r=E,i=A;if(Ru(t)){var o="separator"in t?t.separator:o;r="length"in t?Yu(t.length):r,i="omission"in t?Oi(t.omission):i}var a=(e=Bu(e)).length;if(xn(e)){var u=Cn(e);a=u.length}if(r>=a)return e;var c=r-Mn(i);if(c<1)return i;var s=u?Gi(u,0,c).join(""):e.slice(0,c);if(o===n)return s+i;if(u&&(c+=s.length-c),$u(o)){if(e.slice(c).search(o)){var l,f=s;for(o.global||(o=nt(o.source,Bu(je.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var h=l.index;s=s.slice(0,h===n?c:h)}}else if(e.indexOf(Oi(o),c)!=c){var d=s.lastIndexOf(o);d>-1&&(s=s.slice(0,d))}return s+i},dr.unescape=function(e){return(e=Bu(e))&&we.test(e)?e.replace(ye,Nn):e},dr.uniqueId=function(e){var t=++ft;return Bu(e)+t},dr.upperCase=xc,dr.upperFirst=Tc,dr.each=Ba,dr.eachRight=Va,dr.first=ya,Dc(dr,(Gc={},qr(dr,function(e,t){lt.call(dr.prototype,t)||(Gc[t]=e)}),Gc),{chain:!1}),dr.VERSION="4.17.15",Ht(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){dr[e].placeholder=dr}),Ht(["drop","take"],function(e,t){mr.prototype[e]=function(r){r=r===n?1:Bn(Yu(r),0);var i=this.__filtered__&&!t?new mr(this):this.clone();return i.__filtered__?i.__takeCount__=Vn(r,i.__takeCount__):i.__views__.push({size:Vn(r,D),type:e+(i.__dir__<0?"Right":"")}),i},mr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Ht(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==M||3==n;mr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Oo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Ht(["head","last"],function(e,t){var n="take"+(t?"Right":"");mr.prototype[e]=function(){return this[n](1).value()[0]}}),Ht(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");mr.prototype[e]=function(){return this.__filtered__?new mr(this):this[n](1)}}),mr.prototype.compact=function(){return this.filter(Nc)},mr.prototype.find=function(e){return this.filter(e).head()},mr.prototype.findLast=function(e){return this.reverse().find(e)},mr.prototype.invokeMap=Ti(function(e,t){return"function"==typeof e?new mr(this):this.map(function(n){return ri(n,e,t)})}),mr.prototype.reject=function(e){return this.filter(cu(Oo(e)))},mr.prototype.slice=function(e,t){e=Yu(e);var r=this;return r.__filtered__&&(e>0||t<0)?new mr(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=Yu(t))<0?r.dropRight(-t):r.take(t-e)),r)},mr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},mr.prototype.toArray=function(){return this.take(D)},qr(mr.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=dr[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);o&&(dr.prototype[t]=function(){var t=this.__wrapped__,u=i?[1]:arguments,c=t instanceof mr,s=u[0],l=c||mu(t),f=function(e){var t=o.apply(dr,Qt([e],u));return i&&h?t[0]:t};l&&r&&"function"==typeof s&&1!=s.length&&(c=l=!1);var h=this.__chain__,d=!!this.__actions__.length,p=a&&!h,v=c&&!d;if(!a&&l){t=v?t:new mr(this);var g=e.apply(t,u);return g.__actions__.push({func:ja,args:[f],thisArg:n}),new gr(g,h)}return p&&v?e.apply(this,u):(g=this.thru(f),p?i?g.value()[0]:g.value():g)})}),Ht(["pop","push","shift","sort","splice","unshift"],function(e){var t=ot[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);dr.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(mu(i)?i:[],e)}return this[n](function(n){return t.apply(mu(n)?n:[],e)})}}),qr(mr.prototype,function(e,t){var n=dr[t];if(n){var r=n.name+"";lt.call(ir,r)||(ir[r]=[]),ir[r].push({name:t,func:n})}}),ir[po(n,v).name]=[{name:"wrapper",func:n}],mr.prototype.clone=function(){var e=new mr(this.__wrapped__);return e.__actions__=no(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=no(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=no(this.__views__),e},mr.prototype.reverse=function(){if(this.__filtered__){var e=new mr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},mr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=mu(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Vn(t,e+a);break;case"takeRight":e=Bn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,u=o.end,c=u-a,s=r?u:a-1,l=this.__iteratees__,f=l.length,h=0,d=Vn(c,this.__takeCount__);if(!n||!r&&i==c&&d==c)return Yi(e,this.__actions__);var p=[];e:for(;c--&&h<d;){for(var v=-1,g=e[s+=t];++v<f;){var m=l[v],_=m.iteratee,y=m.type,b=_(g);if(y==C)g=b;else if(!b){if(y==M)continue e;break e}}p[h++]=g}return p},dr.prototype.at=Ya,dr.prototype.chain=function(){return Ua(this)},dr.prototype.commit=function(){return new gr(this.value(),this.__chain__)},dr.prototype.next=function(){this.__values__===n&&(this.__values__=Uu(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},dr.prototype.plant=function(e){for(var t,r=this;r instanceof vr;){var i=ha(r);i.__index__=0,i.__values__=n,t?o.__wrapped__=i:t=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,t},dr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof mr){var t=e;return this.__actions__.length&&(t=new mr(this)),(t=t.reverse()).__actions__.push({func:ja,args:[Ra],thisArg:n}),new gr(t,this.__chain__)}return this.thru(Ra)},dr.prototype.toJSON=dr.prototype.valueOf=dr.prototype.value=function(){return Yi(this.__wrapped__,this.__actions__)},dr.prototype.first=dr.prototype.head,$n&&(dr.prototype[$n]=function(){return this}),dr}();$t?(($t.exports=Ln)._=Ln,Lt._=Ln):Nt._=Ln}).call(commonjsGlobal)});function ascending(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function bisector(e){return 1===e.length&&(e=ascendingComparator(e)),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function ascendingComparator(e){return function(t,n){return ascending(e(t),n)}}var ascendingBisect=bisector(ascending),noop={value:function(){}};function dispatch(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Dispatch(r)}function Dispatch(e){this._=e}function parseTypenames(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function get(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function set$9(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=noop,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(e,t){var n,r=this._,i=parseTypenames(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=set$9(r[n],e.name,t);else if(null==t)for(n in r)r[n]=set$9(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=get(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Dispatch(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var xhtml="http://www.w3.org/1999/xhtml",namespaces={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),namespaces.hasOwnProperty(t)?{space:namespaces[t],local:e}:e}function creatorInherit(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xhtml&&t.documentElement.namespaceURI===xhtml?t.createElement(e):t.createElementNS(n,e)}}function creatorFixed(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function creator(e){var t=namespace(e);return(t.local?creatorFixed:creatorInherit)(t)}function none(){}function selector(e){return null==e?none:function(){return this.querySelector(e)}}function selection_select(e){"function"!=typeof e&&(e=selector(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,u=t[i],c=u.length,s=r[i]=new Array(c),l=0;l<c;++l)(o=u[l])&&(a=e.call(o,o.__data__,l,u))&&("__data__"in o&&(a.__data__=o.__data__),s[l]=a);return new Selection(r,this._parents)}function empty(){return[]}function selectorAll(e){return null==e?empty:function(){return this.querySelectorAll(e)}}function selection_selectAll(e){"function"!=typeof e&&(e=selectorAll(e));for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,u=t[o],c=u.length,s=0;s<c;++s)(a=u[s])&&(r.push(e.call(a,a.__data__,s,u)),i.push(a));return new Selection(r,i)}var matcher=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var element=document.documentElement;if(!element.matches){var vendorMatches=element.webkitMatchesSelector||element.msMatchesSelector||element.mozMatchesSelector||element.oMatchesSelector;matcher=function(e){return function(){return vendorMatches.call(this,e)}}}}var matcher$1=matcher;function selection_filter(e){"function"!=typeof e&&(e=matcher$1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],u=a.length,c=r[i]=[],s=0;s<u;++s)(o=a[s])&&e.call(o,o.__data__,s,a)&&c.push(o);return new Selection(r,this._parents)}function sparse(e){return new Array(e.length)}function selection_enter(){return new Selection(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function constant$1(e){return function(){return e}}EnterNode.prototype={constructor:EnterNode,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var keyPrefix="$";function bindIndex(e,t,n,r,i,o){for(var a,u=0,c=t.length,s=o.length;u<s;++u)(a=t[u])?(a.__data__=o[u],r[u]=a):n[u]=new EnterNode(e,o[u]);for(;u<c;++u)(a=t[u])&&(i[u]=a)}function bindKey(e,t,n,r,i,o,a){var u,c,s,l={},f=t.length,h=o.length,d=new Array(f);for(u=0;u<f;++u)(c=t[u])&&(d[u]=s=keyPrefix+a.call(c,c.__data__,u,t),s in l?i[u]=c:l[s]=c);for(u=0;u<h;++u)(c=l[s=keyPrefix+a.call(e,o[u],u,o)])?(r[u]=c,c.__data__=o[u],l[s]=null):n[u]=new EnterNode(e,o[u]);for(u=0;u<f;++u)(c=t[u])&&l[d[u]]===c&&(i[u]=c)}function selection_data(e,t){if(!e)return d=new Array(this.size()),s=-1,this.each(function(e){d[++s]=e}),d;var n=t?bindKey:bindIndex,r=this._parents,i=this._groups;"function"!=typeof e&&(e=constant$1(e));for(var o=i.length,a=new Array(o),u=new Array(o),c=new Array(o),s=0;s<o;++s){var l=r[s],f=i[s],h=f.length,d=e.call(l,l&&l.__data__,s,r),p=d.length,v=u[s]=new Array(p),g=a[s]=new Array(p);n(l,f,v,g,c[s]=new Array(h),d,t);for(var m,_,y=0,b=0;y<p;++y)if(m=v[y]){for(y>=b&&(b=y+1);!(_=g[b])&&++b<p;);m._next=_||null}}return(a=new Selection(a,r))._enter=u,a._exit=c,a}function selection_exit(){return new Selection(this._exit||this._groups.map(sparse),this._parents)}function selection_merge(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,s=t[u],l=n[u],f=s.length,h=a[u]=new Array(f),d=0;d<f;++d)(c=s[d]||l[d])&&(h[d]=c);for(;u<r;++u)a[u]=t[u];return new Selection(a,this._parents)}function selection_order(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this}function selection_sort(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=ascending$1);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,u=n[o],c=u.length,s=i[o]=new Array(c),l=0;l<c;++l)(a=u[l])&&(s[l]=a);s.sort(t)}return new Selection(i,this._parents).order()}function ascending$1(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function selection_call(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function selection_nodes(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function selection_node(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function selection_size(){var e=0;return this.each(function(){++e}),e}function selection_empty(){return!this.node()}function selection_each(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,u=o.length;a<u;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this}function attrRemove(e){return function(){this.removeAttribute(e)}}function attrRemoveNS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant(e,t){return function(){this.setAttribute(e,t)}}function attrConstantNS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function attrFunction(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function attrFunctionNS(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function selection_attr(e,t){var n=namespace(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?attrRemoveNS:attrRemove:"function"==typeof t?n.local?attrFunctionNS:attrFunction:n.local?attrConstantNS:attrConstant)(n,t))}function defaultView(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function styleRemove(e){return function(){this.style.removeProperty(e)}}function styleConstant(e,t,n){return function(){this.style.setProperty(e,t,n)}}function styleFunction(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function selection_style(e,t,n){return arguments.length>1?this.each((null==t?styleRemove:"function"==typeof t?styleFunction:styleConstant)(e,t,null==n?"":n)):styleValue(this.node(),e)}function styleValue(e,t){return e.style.getPropertyValue(t)||defaultView(e).getComputedStyle(e,null).getPropertyValue(t)}function propertyRemove(e){return function(){delete this[e]}}function propertyConstant(e,t){return function(){this[e]=t}}function propertyFunction(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function selection_property(e,t){return arguments.length>1?this.each((null==t?propertyRemove:"function"==typeof t?propertyFunction:propertyConstant)(e,t)):this.node()[e]}function classArray(e){return e.trim().split(/^|\s+/)}function classList(e){return e.classList||new ClassList(e)}function ClassList(e){this._node=e,this._names=classArray(e.getAttribute("class")||"")}function classedAdd(e,t){for(var n=classList(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function classedRemove(e,t){for(var n=classList(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function classedTrue(e){return function(){classedAdd(this,e)}}function classedFalse(e){return function(){classedRemove(this,e)}}function classedFunction(e,t){return function(){(t.apply(this,arguments)?classedAdd:classedRemove)(this,e)}}function selection_classed(e,t){var n=classArray(e+"");if(arguments.length<2){for(var r=classList(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?classedFunction:t?classedTrue:classedFalse)(n,t))}function textRemove(){this.textContent=""}function textConstant(e){return function(){this.textContent=e}}function textFunction(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function selection_text(e){return arguments.length?this.each(null==e?textRemove:("function"==typeof e?textFunction:textConstant)(e)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(e){return function(){this.innerHTML=e}}function htmlFunction(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function selection_html(e){return arguments.length?this.each(null==e?htmlRemove:("function"==typeof e?htmlFunction:htmlConstant)(e)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(e){var t="function"==typeof e?e:creator(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function constantNull(){return null}function selection_insert(e,t){var n="function"==typeof e?e:creator(e),r=null==t?constantNull:"function"==typeof t?t:selector(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function remove(){var e=this.parentNode;e&&e.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function selection_cloneDeep(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function selection_clone(e){return this.select(e?selection_cloneDeep:selection_cloneShallow)}function selection_datum(e){return arguments.length?this.property("__data__",e):this.node().__data__}ClassList.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var filterEvents={};if("undefined"!=typeof document){var element$1=document.documentElement;"onmouseenter"in element$1||(filterEvents={mouseenter:"mouseover",mouseleave:"mouseout"})}function filterContextListener(e,t,n){return e=contextListener(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function contextListener(e,t,n){return function(r){try{e.call(this,this.__data__,t,n)}finally{}}}function parseTypenames$1(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function onRemove(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function onAdd(e,t,n){var r=filterEvents.hasOwnProperty(e.type)?filterContextListener:contextListener;return function(i,o,a){var u,c=this.__on,s=r(t,o,a);if(c)for(var l=0,f=c.length;l<f;++l)if((u=c[l]).type===e.type&&u.name===e.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=s,u.capture=n),void(u.value=t);this.addEventListener(e.type,s,n),u={type:e.type,name:e.name,value:t,listener:s,capture:n},c?c.push(u):this.__on=[u]}}function selection_on(e,t,n){var r,i,o=parseTypenames$1(e+""),a=o.length;if(!(arguments.length<2)){for(u=t?onAdd:onRemove,null==n&&(n=!1),r=0;r<a;++r)this.each(u(o[r],t,n));return this}var u=this.node().__on;if(u)for(var c,s=0,l=u.length;s<l;++s)for(r=0,c=u[s];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value}function dispatchEvent(e,t,n){var r=defaultView(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function dispatchConstant(e,t){return function(){return dispatchEvent(this,e,t)}}function dispatchFunction(e,t){return function(){return dispatchEvent(this,e,t.apply(this,arguments))}}function selection_dispatch(e,t){return this.each(("function"==typeof t?dispatchFunction:dispatchConstant)(e,t))}var root$1=[null];function Selection(e,t){this._groups=e,this._parents=t}function selection(){return new Selection([[document.documentElement]],root$1)}function define(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function extend(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Color(){}Selection.prototype=selection.prototype={constructor:Selection,select:selection_select,selectAll:selection_selectAll,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,merge:selection_merge,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch};var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex3=/^#([0-9a-f]{3})$/,reHex6=/^#([0-9a-f]{6})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color(e){var t;return e=(e+"").trim().toLowerCase(),(t=reHex3.exec(e))?new Rgb((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=reHex6.exec(e))?rgbn(parseInt(t[1],16)):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=reRgbaInteger.exec(e))?rgba(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=reHslPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):"transparent"===e?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,255&e,1)}function rgba(e,t,n,r){return r<=0&&(e=t=n=NaN),new Rgb(e,t,n,r)}function rgbConvert(e){return e instanceof Color||(e=color(e)),e?new Rgb((e=e.rgb()).r,e.g,e.b,e.opacity):new Rgb}function rgb(e,t,n,r){return 1===arguments.length?rgbConvert(e):new Rgb(e,t,n,null==r?1:r)}function Rgb(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function hsla(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,n,r)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,u=o-i,c=(o+i)/2;return u?(a=t===o?(n-r)/u+6*(n<r):n===o?(r-t)/u+2:(t-n)/u+4,u/=c<.5?o+i:2-o-i,a*=60):u=c>0&&c<1?0:a,new Hsl(a,u,c,e.opacity)}function hsl(e,t,n,r){return 1===arguments.length?hslConvert(e):new Hsl(e,t,n,null==r?1:r)}function Hsl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function hsl2rgb(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}define(Color,color,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),define(Rgb,rgb,extend(Color,{brighter:function(e){return e=null==e?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),define(Hsl,hsl,extend(Color,{brighter:function(e){return e=null==e?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Rgb(hsl2rgb(e>=240?e-240:e+120,i,r),hsl2rgb(e,i,r),hsl2rgb(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var deg2rad=Math.PI/180,rad2deg=180/Math.PI,Kn=18,Xn=.95047,Yn=1,Zn=1.08883,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1;function labConvert(e){if(e instanceof Lab)return new Lab(e.l,e.a,e.b,e.opacity);if(e instanceof Hcl){var t=e.h*deg2rad;return new Lab(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof Rgb||(e=rgbConvert(e));var n=rgb2xyz(e.r),r=rgb2xyz(e.g),i=rgb2xyz(e.b),o=xyz2lab((.4124564*n+.3575761*r+.1804375*i)/Xn),a=xyz2lab((.2126729*n+.7151522*r+.072175*i)/Yn);return new Lab(116*a-16,500*(o-a),200*(a-xyz2lab((.0193339*n+.119192*r+.9503041*i)/Zn)),e.opacity)}function lab(e,t,n,r){return 1===arguments.length?labConvert(e):new Lab(e,t,n,null==r?1:r)}function Lab(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function xyz2lab(e){return e>t3?Math.pow(e,1/3):e/t2+t0}function lab2xyz(e){return e>t1?e*e*e:t2*(e-t0)}function xyz2rgb(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function rgb2xyz(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function hclConvert(e){if(e instanceof Hcl)return new Hcl(e.h,e.c,e.l,e.opacity);e instanceof Lab||(e=labConvert(e));var t=Math.atan2(e.b,e.a)*rad2deg;return new Hcl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function hcl(e,t,n,r){return 1===arguments.length?hclConvert(e):new Hcl(e,t,n,null==r?1:r)}function Hcl(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}define(Lab,lab,extend(Color,{brighter:function(e){return new Lab(this.l+Kn*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Lab(this.l-Kn*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=Yn*lab2xyz(e),new Rgb(xyz2rgb(3.2404542*(t=Xn*lab2xyz(t))-1.5371385*e-.4985314*(n=Zn*lab2xyz(n))),xyz2rgb(-.969266*t+1.8760108*e+.041556*n),xyz2rgb(.0556434*t-.2040259*e+1.0572252*n),this.opacity)}})),define(Hcl,hcl,extend(Color,{brighter:function(e){return new Hcl(this.h,this.c,this.l+Kn*(null==e?1:e),this.opacity)},darker:function(e){return new Hcl(this.h,this.c,this.l-Kn*(null==e?1:e),this.opacity)},rgb:function(){return labConvert(this).rgb()}}));var A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelixConvert(e){if(e instanceof Cubehelix)return new Cubehelix(e.h,e.s,e.l,e.opacity);e instanceof Rgb||(e=rgbConvert(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(BC_DA*r+ED*t-EB*n)/(BC_DA+ED-EB),o=r-i,a=(E*(n-i)-C*o)/D,u=Math.sqrt(a*a+o*o)/(E*i*(1-i)),c=u?Math.atan2(a,o)*rad2deg-120:NaN;return new Cubehelix(c<0?c+360:c,u,i,e.opacity)}function cubehelix(e,t,n,r){return 1===arguments.length?cubehelixConvert(e):new Cubehelix(e,t,n,null==r?1:r)}function Cubehelix(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function constant$3(e){return function(){return e}}function linear(e,t){return function(n){return e+n*t}}function exponential(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function hue(e,t){var n=t-e;return n?linear(e,n>180||n<-180?n-360*Math.round(n/360):n):constant$3(isNaN(e)?t:e)}function gamma(e){return 1==(e=+e)?nogamma:function(t,n){return n-t?exponential(t,n,e):constant$3(isNaN(t)?n:t)}}function nogamma(e,t){var n=t-e;return n?linear(e,n):constant$3(isNaN(e)?t:e)}define(Cubehelix,cubehelix,extend(Color,{brighter:function(e){return e=null==e?brighter:Math.pow(brighter,e),new Cubehelix(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?darker:Math.pow(darker,e),new Cubehelix(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*deg2rad,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Rgb(255*(t+n*(A*r+B*i)),255*(t+n*(C*r+D*i)),255*(t+n*(E*r)),this.opacity)}}));var interpolateRgb=function e(t){var n=gamma(t);function r(e,t){var r=n((e=rgb(e)).r,(t=rgb(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=nogamma(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function interpolateNumber(e,t){return t-=e=+e,function(n){return e+t*n}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function interpolateString(e,t){var n,r,i,o=reA.lastIndex=reB.lastIndex=0,a=-1,u=[],c=[];for(e+="",t+="";(n=reA.exec(e))&&(r=reB.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:interpolateNumber(n,r)})),o=reB.lastIndex;return o<t.length&&(i=t.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?one(c[0].x):zero(t):(t=c.length,function(e){for(var n,r=0;r<t;++r)u[(n=c[r]).i]=n.x(e);return u.join("")})}var cssNode,cssRoot,cssView,svgNode,degrees=180/Math.PI,identity$8={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(e,t,n,r,i,o){var a,u,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,c/=u),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*degrees,skewX:Math.atan(c)*degrees,scaleX:a,scaleY:u}}function parseCss(e){return"none"===e?identity$8:(cssNode||(cssNode=document.createElement("DIV"),cssRoot=document.documentElement,cssView=document.defaultView),cssNode.style.transform=e,e=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform"),cssRoot.removeChild(cssNode),decompose(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function parseSvg(e){return null==e?identity$8:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",e),(e=svgNode.transform.baseVal.consolidate())?decompose((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):identity$8)}function interpolateTransform(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var u=[],c=[];return o=e(o),a=e(a),function(e,r,i,o,a,u){if(e!==i||r!==o){var c=a.push("translate(",null,t,null,n);u.push({i:c-4,x:interpolateNumber(e,i)},{i:c-2,x:interpolateNumber(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,u,c),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:interpolateNumber(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,u,c),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:interpolateNumber(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,u,c),function(e,t,n,r,o,a){if(e!==n||t!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:interpolateNumber(e,n)},{i:u-2,x:interpolateNumber(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,c),o=a=null,function(e){for(var t,n=-1,r=c.length;++n<r;)u[(t=c[n]).i]=t.x(e);return u.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),rho=Math.SQRT2;function cubehelix$1(e){return function t(n){function r(t,r){var i=e((t=cubehelix(t)).h,(r=cubehelix(r)).h),o=nogamma(t.s,r.s),a=nogamma(t.l,r.l),u=nogamma(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}cubehelix$1(hue);var taskHead,taskTail,cubehelixLong=cubehelix$1(nogamma),frame=0,timeout=0,interval=0,pokeDelay=1e3,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function now$1(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(e,t,n){var r=new Timer;return r.restart(e,t,n),r}function timerFlush(){now$1(),++frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(null,e),t=t._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var e=clock.now(),t=e-clockLast;t>pokeDelay&&(clockSkew-=t,clockLast=e)}function nap(){for(var e,t,n=taskHead,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:taskHead=t);taskTail=e,sleep(r)}function sleep(e){frame||(timeout&&(timeout=clearTimeout(timeout)),e-clockNow>24?(e<1/0&&(timeout=setTimeout(wake,e-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake)))}function timeout$1(e,t,n){var r=new Timer;return t=null==t?0:+t,r.restart(function(n){r.stop(),e(n+t)},t,n),r}Timer.prototype=timer.prototype={constructor:Timer,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?now$1():+n)+(null==t?0:+t),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=e,this._time=n,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var emptyOn=dispatch("start","end","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};create$a(e,n,{name:t,index:r,group:i,on:emptyOn,tween:emptyTween,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:CREATED})}function init(e,t){var n=get$1(e,t);if(n.state>CREATED)throw new Error("too late; already scheduled");return n}function set$a(e,t){var n=get$1(e,t);if(n.state>STARTING)throw new Error("too late; already started");return n}function get$1(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function create$a(e,t,n){var r,i=e.__transition;function o(c){var s,l,f,h;if(n.state!==SCHEDULED)return u();for(s in i)if((h=i[s]).name===n.name){if(h.state===STARTED)return timeout$1(o);h.state===RUNNING?(h.state=ENDED,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[s]):+s<t&&(h.state=ENDED,h.timer.stop(),delete i[s])}if(timeout$1(function(){n.state===STARTED&&(n.state=RUNNING,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=STARTING,n.on.call("start",e,e.__data__,n.index,n.group),n.state===STARTING){for(n.state=STARTED,r=new Array(f=n.tween.length),s=0,l=-1;s<f;++s)(h=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(r[++l]=h);r.length=l+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=ENDING,1),o=-1,a=r.length;++o<a;)r[o].call(null,i);n.state===ENDING&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=ENDED,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=timer(function(e){n.state=SCHEDULED,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)},0,n.time)}function interrupt(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>STARTING&&n.state<ENDING,n.state=ENDED,n.timer.stop(),r&&n.on.call("interrupt",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}function selection_interrupt(e){return this.each(function(){interrupt(this,e)})}function tweenRemove(e,t){var n,r;return function(){var i=set$a(this,e),o=i.tween;if(o!==n)for(var a=0,u=(r=n=o).length;a<u;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function tweenFunction(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=set$a(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:t,value:n},c=0,s=i.length;c<s;++c)if(i[c].name===t){i[c]=u;break}c===s&&i.push(u)}o.tween=i}}function transition_tween(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=get$1(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?tweenRemove:tweenFunction)(n,e,t))}function tweenValue(e,t,n){var r=e._id;return e.each(function(){var e=set$a(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return get$1(e,r).value[t]}}function interpolate(e,t){var n;return("number"==typeof t?interpolateNumber:t instanceof color?interpolateRgb:(n=color(t))?(t=n,interpolateRgb):interpolateString)(e,t)}function attrRemove$1(e){return function(){this.removeAttribute(e)}}function attrRemoveNS$1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant$1(e,t,n){var r,i;return function(){var o=this.getAttribute(e);return o===n?null:o===r?i:i=t(r=o,n)}}function attrConstantNS$1(e,t,n){var r,i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===n?null:o===r?i:i=t(r=o,n)}}function attrFunction$1(e,t,n){var r,i,o;return function(){var a,u=n(this);if(null!=u)return(a=this.getAttribute(e))===u?null:a===r&&u===i?o:o=t(r=a,i=u);this.removeAttribute(e)}}function attrFunctionNS$1(e,t,n){var r,i,o;return function(){var a,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===u?null:a===r&&u===i?o:o=t(r=a,i=u);this.removeAttributeNS(e.space,e.local)}}function transition_attr(e,t){var n=namespace(e),r="transform"===n?interpolateTransformSvg:interpolate;return this.attrTween(e,"function"==typeof t?(n.local?attrFunctionNS$1:attrFunction$1)(n,r,tweenValue(this,"attr."+e,t)):null==t?(n.local?attrRemoveNS$1:attrRemove$1)(n):(n.local?attrConstantNS$1:attrConstant$1)(n,r,t+""))}function attrTweenNS(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttributeNS(e.space,e.local,r(t))}}return n._value=t,n}function attrTween(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttribute(e,r(t))}}return n._value=t,n}function transition_attrTween(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=namespace(e);return this.tween(n,(r.local?attrTweenNS:attrTween)(r,t))}function delayFunction(e,t){return function(){init(this,e).delay=+t.apply(this,arguments)}}function delayConstant(e,t){return t=+t,function(){init(this,e).delay=t}}function transition_delay(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?delayFunction:delayConstant)(t,e)):get$1(this.node(),t).delay}function durationFunction(e,t){return function(){set$a(this,e).duration=+t.apply(this,arguments)}}function durationConstant(e,t){return t=+t,function(){set$a(this,e).duration=t}}function transition_duration(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?durationFunction:durationConstant)(t,e)):get$1(this.node(),t).duration}function easeConstant(e,t){if("function"!=typeof t)throw new Error;return function(){set$a(this,e).ease=t}}function transition_ease(e){var t=this._id;return arguments.length?this.each(easeConstant(t,e)):get$1(this.node(),t).ease}function transition_filter(e){"function"!=typeof e&&(e=matcher$1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],u=a.length,c=r[i]=[],s=0;s<u;++s)(o=a[s])&&e.call(o,o.__data__,s,a)&&c.push(o);return new Transition(r,this._parents,this._name,this._id)}function transition_merge(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,s=t[u],l=n[u],f=s.length,h=a[u]=new Array(f),d=0;d<f;++d)(c=s[d]||l[d])&&(h[d]=c);for(;u<r;++u)a[u]=t[u];return new Transition(a,this._parents,this._name,this._id)}function start(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}function onFunction(e,t,n){var r,i,o=start(t)?init:set$a;return function(){var a=o(this,e),u=a.on;u!==r&&(i=(r=u).copy()).on(t,n),a.on=i}}function transition_on(e,t){var n=this._id;return arguments.length<2?get$1(this.node(),n).on.on(e):this.each(onFunction(n,e,t))}function removeFunction(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=selector(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,c,s=r[a],l=s.length,f=o[a]=new Array(l),h=0;h<l;++h)(u=s[h])&&(c=e.call(u,u.__data__,h,s))&&("__data__"in u&&(c.__data__=u.__data__),f[h]=c,schedule(f[h],t,n,h,f,get$1(u,n)));return new Transition(o,this._parents,t,n)}function transition_selectAll(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=selectorAll(e));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var c,s=r[u],l=s.length,f=0;f<l;++f)if(c=s[f]){for(var h,d=e.call(c,c.__data__,f,s),p=get$1(c,n),v=0,g=d.length;v<g;++v)(h=d[v])&&schedule(h,t,n,v,d,p);o.push(d),a.push(c)}return new Transition(o,a,t,n)}var Selection$1=selection.prototype.constructor;function transition_selection(){return new Selection$1(this._groups,this._parents)}function styleRemove$1(e,t){var n,r,i;return function(){var o=styleValue(this,e),a=(this.style.removeProperty(e),styleValue(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function styleRemoveEnd(e){return function(){this.style.removeProperty(e)}}function styleConstant$1(e,t,n){var r,i;return function(){var o=styleValue(this,e);return o===n?null:o===r?i:i=t(r=o,n)}}function styleFunction$1(e,t,n){var r,i,o;return function(){var a=styleValue(this,e),u=n(this);return null==u&&(this.style.removeProperty(e),u=styleValue(this,e)),a===u?null:a===r&&u===i?o:o=t(r=a,i=u)}}function transition_style(e,t,n){var r="transform"==(e+="")?interpolateTransformCss:interpolate;return null==t?this.styleTween(e,styleRemove$1(e,r)).on("end.style."+e,styleRemoveEnd(e)):this.styleTween(e,"function"==typeof t?styleFunction$1(e,r,tweenValue(this,"style."+e,t)):styleConstant$1(e,r,t+""),n)}function styleTween(e,t,n){function r(){var r=this,i=t.apply(r,arguments);return i&&function(t){r.style.setProperty(e,i(t),n)}}return r._value=t,r}function transition_styleTween(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,styleTween(e,t,null==n?"":n))}function textConstant$1(e){return function(){this.textContent=e}}function textFunction$1(e){return function(){var t=e(this);this.textContent=null==t?"":t}}function transition_text(e){return this.tween("text","function"==typeof e?textFunction$1(tweenValue(this,"text",e)):textConstant$1(null==e?"":e+""))}function transition_transition(){for(var e=this._name,t=this._id,n=newId(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,s=0;s<c;++s)if(a=u[s]){var l=get$1(a,t);schedule(a,e,n,s,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Transition(r,this._parents,e,n)}var id=0;function Transition(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function transition(e){return selection().transition(e)}function newId(){return++id}var selection_prototype=selection.prototype;function cubicInOut(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Transition.prototype=transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease};var pi=Math.PI,tau=2*Math.PI,defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return defaultTiming.time=now$1(),defaultTiming;return n}function selection_transition(e){var t,n;e instanceof Transition?(t=e._id,e=e._name):(t=newId(),(n=defaultTiming).time=now$1(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,s=0;s<c;++s)(a=u[s])&&schedule(a,e,t,s,u,n||inherit(a,t));return new Transition(r,this._parents,e,t)}selection.prototype.interrupt=selection_interrupt,selection.prototype.transition=selection_transition;var pi$1=Math.PI,pi$2=Math.PI,prefix$1="$";function Map(){}function map$2(e,t){var n=new Map;if(e instanceof Map)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,i=-1,o=e.length;if(null==t)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t(r=e[i],i,e),r)}else if(e)for(var a in e)n.set(a,e[a]);return n}function Set(){}Map.prototype=map$2.prototype={constructor:Map,has:function(e){return prefix$1+e in this},get:function(e){return this[prefix$1+e]},set:function(e,t){return this[prefix$1+e]=t,this},remove:function(e){var t=prefix$1+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===prefix$1&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===prefix$1&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===prefix$1&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===prefix$1&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===prefix$1&&++e;return e},empty:function(){for(var e in this)if(e[0]===prefix$1)return!1;return!0},each:function(e){for(var t in this)t[0]===prefix$1&&e(this[t],t.slice(1),this)}};var proto=map$2.prototype;function set$b(e,t){var n=new Set;if(e instanceof Set)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}Set.prototype=set$b.prototype={constructor:Set,has:proto.has,add:function(e){return this[prefix$1+(e+="")]=e,this},remove:proto.remove,clear:proto.clear,values:proto.keys,size:proto.size,empty:proto.empty,each:proto.each};var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function customConverter(e,t){var n=objectConverter(e);return function(r,i){return t(n(r),i,e)}}function inferColumns(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function dsv(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,u=0,c=o<=0,s=!1;function l(){if(c)return EOF;if(s)return s=!1,EOL;var t,r,i=a;if(e.charCodeAt(i)===QUOTE){for(;a++<o&&e.charCodeAt(a)!==QUOTE||e.charCodeAt(++a)===QUOTE;);return(t=a)>=o?c=!0:(r=e.charCodeAt(a++))===NEWLINE?s=!0:r===RETURN&&(s=!0,e.charCodeAt(a)===NEWLINE&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if((r=e.charCodeAt(t=a++))===NEWLINE)s=!0;else if(r===RETURN)s=!0,e.charCodeAt(a)===NEWLINE&&++a;else if(r!==n)continue;return e.slice(i,t)}return c=!0,e.slice(i,o)}for(e.charCodeAt(o-1)===NEWLINE&&--o,e.charCodeAt(o-1)===RETURN&&--o;(r=l())!==EOF;){for(var f=[];r!==EOL&&r!==EOF;)f.push(r),r=l();t&&null==(f=t(f,u++))||i.push(f)}return i}function i(t){return t.map(o).join(e)}function o(e){return null==e?"":t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,function(e,r){if(n)return n(e,r-1);i=e,n=t?customConverter(e,t):objectConverter(e)});return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=inferColumns(t)),[n.map(o).join(e)].concat(t.map(function(t){return n.map(function(e){return o(t[e])}).join(e)})).join("\n")},formatRows:function(e){return e.map(i).join("\n")}}}var csv=dsv(","),tsv=dsv("\t");function tree_add(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return add$9(this.cover(t,n),t,n,e)}function add$9(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,u,c,s,l,f,h,d=e._root,p={data:r},v=e._x0,g=e._y0,m=e._x1,_=e._y1;if(!d)return e._root=p,e;for(;d.length;)if((s=t>=(o=(v+m)/2))?v=o:m=o,(l=n>=(a=(g+_)/2))?g=a:_=a,i=d,!(d=d[f=l<<1|s]))return i[f]=p,e;if(u=+e._x.call(null,d.data),c=+e._y.call(null,d.data),t===u&&n===c)return p.next=d,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(s=t>=(o=(v+m)/2))?v=o:m=o,(l=n>=(a=(g+_)/2))?g=a:_=a}while((f=l<<1|s)==(h=(c>=a)<<1|u>=o));return i[h]=d,i[f]=p,e}function addAll(e){var t,n,r,i,o=e.length,a=new Array(o),u=new Array(o),c=1/0,s=1/0,l=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,u[n]=i,r<c&&(c=r),r>l&&(l=r),i<s&&(s=i),i>f&&(f=i));for(l<c&&(c=this._x0,l=this._x1),f<s&&(s=this._y0,f=this._y1),this.cover(c,s).cover(l,f),n=0;n<o;++n)add$9(this,a[n],u[n],e[n]);return this}function tree_cover(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{if(!(n>e||e>i||r>t||t>o))return this;var a,u,c=i-n,s=this._root;switch(u=(t<(r+o)/2)<<1|e<(n+i)/2){case 0:do{(a=new Array(4))[u]=s,s=a}while(o=r+(c*=2),e>(i=n+c)||t>o);break;case 1:do{(a=new Array(4))[u]=s,s=a}while(o=r+(c*=2),(n=i-c)>e||t>o);break;case 2:do{(a=new Array(4))[u]=s,s=a}while(r=o-(c*=2),e>(i=n+c)||r>t);break;case 3:do{(a=new Array(4))[u]=s,s=a}while(r=o-(c*=2),(n=i-c)>e||r>t)}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function tree_data(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e}function tree_extent(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function tree_find(e,t,n){var r,i,o,a,u,c,s,l=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new Quad(v,l,f,h,d)),null==n?n=1/0:(l=e-n,f=t-n,h=e+n,d=t+n,n*=n);c=p.pop();)if(!(!(v=c.node)||(i=c.x0)>h||(o=c.y0)>d||(a=c.x1)<l||(u=c.y1)<f))if(v.length){var g=(i+a)/2,m=(o+u)/2;p.push(new Quad(v[3],g,m,a,u),new Quad(v[2],i,m,g,u),new Quad(v[1],g,o,a,m),new Quad(v[0],i,o,g,m)),(s=(t>=m)<<1|e>=g)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-s],p[p.length-1-s]=c)}else{var _=e-+this._x.call(null,v.data),y=t-+this._y.call(null,v.data),b=_*_+y*y;if(b<n){var w=Math.sqrt(n=b);l=e-w,f=t-w,h=e+w,d=t+w,r=v.data}}return r}function tree_remove(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,u,c,s,l,f,h,d=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((s=o>=(u=(p+g)/2))?p=u:g=u,(l=a>=(c=(v+m)/2))?v=c:m=c,t=d,!(d=d[f=l<<1|s]))return this;if(!d.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,h=f)}for(;d.data!==e;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(d=t[0]||t[1]||t[2]||t[3])&&d===(t[3]||t[2]||t[1]||t[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)}function removeAll(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function tree_root(){return this._root}function tree_size(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e}function tree_visit(e){var t,n,r,i,o,a,u=[],c=this._root;for(c&&u.push(new Quad(c,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(c=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&c.length){var s=(r+o)/2,l=(i+a)/2;(n=c[3])&&u.push(new Quad(n,s,l,o,a)),(n=c[2])&&u.push(new Quad(n,r,l,s,a)),(n=c[1])&&u.push(new Quad(n,s,i,o,l)),(n=c[0])&&u.push(new Quad(n,r,i,s,l))}return this}function tree_visitAfter(e){var t,n=[],r=[];for(this._root&&n.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,u=t.y0,c=t.x1,s=t.y1,l=(a+c)/2,f=(u+s)/2;(o=i[0])&&n.push(new Quad(o,a,u,l,f)),(o=i[1])&&n.push(new Quad(o,l,u,c,f)),(o=i[2])&&n.push(new Quad(o,a,f,l,s)),(o=i[3])&&n.push(new Quad(o,l,f,c,s))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this}function defaultX(e){return e[0]}function tree_x(e){return arguments.length?(this._x=e,this):this._x}function defaultY(e){return e[1]}function tree_y(e){return arguments.length?(this._y=e,this):this._y}function quadtree(e,t,n){var r=new Quadtree(null==t?defaultX:t,null==n?defaultY:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Quadtree(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function leaf_copy(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var e,t,n=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=leaf_copy(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=leaf_copy(t));return n},treeProto.add=tree_add,treeProto.addAll=addAll,treeProto.cover=tree_cover,treeProto.data=tree_data,treeProto.extent=tree_extent,treeProto.find=tree_find,treeProto.remove=tree_remove,treeProto.removeAll=removeAll,treeProto.root=tree_root,treeProto.size=tree_size,treeProto.visit=tree_visit,treeProto.visitAfter=tree_visitAfter,treeProto.x=tree_x,treeProto.y=tree_y;var prefixExponent,initialAngle=Math.PI*(3-Math.sqrt(5));function formatDecimal(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function exponent$1(e){return(e=formatDecimal(Math.abs(e)))?e[1]:NaN}function formatGroup(e,t){return function(n,r){for(var i=n.length,o=[],a=0,u=e[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),o.push(n.substring(i-=u,i+u)),!((c+=u+1)>r));)u=e[a=(a+1)%e.length];return o.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}function formatDefault(e,t){e:for(var n,r=(e=e.toPrecision(t)).length,i=1,o=-1;i<r;++i)switch(e[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break e;default:o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(n+1):e}function formatPrefixAuto(e,t){var n=formatDecimal(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+formatDecimal(e,Math.max(0,t+o-1))[0]}function formatRounded(e,t){var n=formatDecimal(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var formatTypes={"":formatDefault,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return formatRounded(100*e,t)},r:formatRounded,s:formatPrefixAuto,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},re=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function formatSpecifier(e){return new FormatSpecifier(e)}function FormatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",o=t[4]||"",a=!!t[5],u=t[6]&&+t[6],c=!!t[7],s=t[8]&&+t[8].slice(1),l=t[9]||"";"n"===l?(c=!0,l="g"):formatTypes[l]||(l=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=u,this.comma=c,this.precision=s,this.type=l}function identity$9(e){return e}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var locale,format,formatPrefix,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(e){var t=e.grouping&&e.thousands?formatGroup(e.grouping,e.thousands):identity$9,n=e.currency,r=e.decimal,i=e.numerals?formatNumerals(e.numerals):identity$9,o=e.percent||"%";function a(e){var a=(e=formatSpecifier(e)).fill,u=e.align,c=e.sign,s=e.symbol,l=e.zero,f=e.width,h=e.comma,d=e.precision,p=e.type,v="$"===s?n[0]:"#"===s&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",g="$"===s?n[1]:/[%p]/.test(p)?o:"",m=formatTypes[p],_=!p||/[defgprs%]/.test(p);function y(e){var n,o,s,y=v,b=g;if("c"===p)b=m(e)+b,e="";else{var w=(e=+e)<0;if(e=m(Math.abs(e),d),w&&0==+e&&(w=!1),y=(w?"("===c?c:"-":"-"===c||"("===c?"":c)+y,b=("s"===p?prefixes[8+prefixExponent/3]:"")+b+(w&&"("===c?")":""),_)for(n=-1,o=e.length;++n<o;)if(48>(s=e.charCodeAt(n))||s>57){b=(46===s?r+e.slice(n+1):e.slice(n))+b,e=e.slice(0,n);break}}h&&!l&&(e=t(e,1/0));var x=y.length+e.length+b.length,T=x<f?new Array(f-x+1).join(a):"";switch(h&&l&&(e=t(T+e,T.length?f-b.length:1/0),T=""),u){case"<":e=y+e+b+T;break;case"=":e=y+T+e+b;break;case"^":e=T.slice(0,x=T.length>>1)+y+e+b+T.slice(x);break;default:e=T+y+e+b}return i(e)}return d=null==d?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),y.toString=function(){return e+""},y}return{format:a,formatPrefix:function(e,t){var n=a(((e=formatSpecifier(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(exponent$1(t)/3))),i=Math.pow(10,-r),o=prefixes[8+r/3];return function(e){return n(i*e)+o}}}}function defaultLocale(e){return locale=formatLocale(e),format=locale.format,formatPrefix=locale.formatPrefix,locale}function adder(){return new Adder}function Adder(){this.reset()}defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(e){add$a(temp,e,this.t),add$a(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add$a(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var pi$3=Math.PI,areaRingSum=adder(),areaSum=adder(),deltaSum=adder(),sum$1=adder(),lengthSum=adder(),areaSum$1=adder(),areaRingSum$1=adder(),lengthSum$1=adder(),t0$1=new Date,t1$1=new Date;function newInterval(e,t,n,r){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,u=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return u;do{u.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return u},i.filter=function(n){return newInterval(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})},n&&(i.count=function(t,r){return t0$1.setTime(+t),t1$1.setTime(+r),e(t0$1),e(t1$1),Math.floor(n(t0$1,t1$1))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var millisecond=newInterval(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});millisecond.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?newInterval(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):millisecond:null};var milliseconds=millisecond.range,durationSecond=1e3,durationMinute=6e4,durationHour=36e5,durationDay=864e5,durationWeek=6048e5,second=newInterval(function(e){e.setTime(Math.floor(e/durationSecond)*durationSecond)},function(e,t){e.setTime(+e+t*durationSecond)},function(e,t){return(t-e)/durationSecond},function(e){return e.getUTCSeconds()}),seconds=second.range,minute=newInterval(function(e){e.setTime(Math.floor(e/durationMinute)*durationMinute)},function(e,t){e.setTime(+e+t*durationMinute)},function(e,t){return(t-e)/durationMinute},function(e){return e.getMinutes()}),minutes=minute.range,hour=newInterval(function(e){var t=e.getTimezoneOffset()*durationMinute%durationHour;t<0&&(t+=durationHour),e.setTime(Math.floor((+e-t)/durationHour)*durationHour+t)},function(e,t){e.setTime(+e+t*durationHour)},function(e,t){return(t-e)/durationHour},function(e){return e.getHours()}),hours=hour.range,day=newInterval(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationDay},function(e){return e.getDate()-1}),days=day.range;function weekday(e){return newInterval(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationWeek})}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),sundays=sunday.range,month=newInterval(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),months=month.range,year=newInterval(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});year.every=function(e){return isFinite(e=Math.floor(e))&&e>0?newInterval(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var years=year.range,utcMinute=newInterval(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*durationMinute)},function(e,t){return(t-e)/durationMinute},function(e){return e.getUTCMinutes()}),utcMinutes=utcMinute.range,utcHour=newInterval(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*durationHour)},function(e,t){return(t-e)/durationHour},function(e){return e.getUTCHours()}),utcHours=utcHour.range,utcDay=newInterval(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/durationDay},function(e){return e.getUTCDate()-1}),utcDays=utcDay.range;function utcWeekday(e){return newInterval(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/durationWeek})}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcSundays=utcSunday.range,utcMonth=newInterval(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),utcMonths=utcMonth.range,utcYear=newInterval(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});utcYear.every=function(e){return isFinite(e=Math.floor(e))&&e>0?newInterval(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var utcYears=utcYear.range;function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newYear(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function formatLocale$1(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,u=e.months,c=e.shortMonths,s=formatRe(i),l=formatLookup(i),f=formatRe(o),h=formatLookup(o),d=formatRe(a),p=formatLookup(a),v=formatRe(u),g=formatLookup(u),m=formatRe(c),_=formatLookup(c),y={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(e){return i[+(e.getHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},b={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(e){return i[+(e.getUTCHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},w={a:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=_[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(e,t,n){var r=s.exec(t.slice(n));return r?(e.p=l[r[0].toLowerCase()],n+r[0].length):-1},Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function x(e,t){return function(n){var r,i,o,a=[],u=-1,c=0,s=e.length;for(n instanceof Date||(n=new Date(+n));++u<s;)37===e.charCodeAt(u)&&(a.push(e.slice(c,u)),null!=(i=pads[r=e.charAt(++u)])?r=e.charAt(++u):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),c=u+1);return a.push(e.slice(c,u)),a.join("")}}function T(e,t){return function(n){var r,i,o=newYear(1900);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=utcDate(newYear(o.y))).getUTCDay(),r=i>4||0===i?utcMonday.ceil(r):utcMonday(r),r=utcDay.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=t(newYear(o.y))).getDay(),r=i>4||0===i?monday.ceil(r):monday(r),r=day.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?utcDate(newYear(o.y)).getUTCDay():t(newYear(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,utcDate(o)):t(o)}}function E(e,t,n,r){for(var i,o,a=0,u=t.length,c=n.length;a<u;){if(r>=c)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=w[i in pads?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=x(n,y),y.X=x(r,y),y.c=x(t,y),b.x=x(n,b),b.X=x(r,b),b.c=x(t,b),{format:function(e){var t=x(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=T(e+="",localDate);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=T(e,utcDate);return t.toString=function(){return e},t}}}var locale$1,timeFormat,timeParse,utcFormat,utcParse,pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function requote(e){return e.replace(requoteRe,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function parseWeekdayNumberSunday(e,t,n){var r=numberRe.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function parseWeekdayNumberMonday(e,t,n){var r=numberRe.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function parseWeekNumberSunday(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function parseWeekNumberISO(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function parseWeekNumberMonday(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function parseFullYear(e,t,n){var r=numberRe.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function parseYear(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function parseZone(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function parseMonthNumber(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function parseDayOfMonth(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function parseDayOfYear(e,t,n){var r=numberRe.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function parseHour24(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function parseMinutes(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function parseSeconds(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function parseMilliseconds(e,t,n){var r=numberRe.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function parseMicroseconds(e,t,n){var r=numberRe.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function parseLiteralPercent(e,t,n){var r=percentRe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function parseUnixTimestamp(e,t,n){var r=numberRe.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function parseUnixTimestampSeconds(e,t,n){var r=numberRe.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+day.count(year(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return 0===t?7:t}function formatWeekNumberSunday(e,t){return pad(sunday.count(year(e),e),t,2)}function formatWeekNumberISO(e,t){var n=e.getDay();return e=n>=4||0===n?thursday(e):thursday.ceil(e),pad(thursday.count(year(e),e)+(4===year(e).getDay()),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(monday.count(year(e),e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+utcDay.count(utcYear(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return 0===t?7:t}function formatUTCWeekNumberSunday(e,t){return pad(utcSunday.count(utcYear(e),e),t,2)}function formatUTCWeekNumberISO(e,t){var n=e.getUTCDay();return e=n>=4||0===n?utcThursday(e):utcThursday.ceil(e),pad(utcThursday.count(utcYear(e),e)+(4===utcYear(e).getUTCDay()),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(utcMonday.count(utcYear(e),e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}function defaultLocale$1(e){return locale$1=formatLocale$1(e),timeFormat=locale$1.format,timeParse=locale$1.parse,utcFormat=locale$1.utcFormat,utcParse=locale$1.utcParse,locale$1}defaultLocale$1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(e){return e.toISOString()}var formatIso=Date.prototype.toISOString?formatIsoNative:utcFormat(isoSpecifier);function parseIsoNative(e){var t=new Date(e);return isNaN(t)?null:t}var parseIso=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:utcParse(isoSpecifier);function colors(e){return e.match(/.{6}/g).map(function(e){return"#"+e})}colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),colors("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),colors("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),colors("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),cubehelixLong(cubehelix(300,.5,0),cubehelix(-240,.5,1));var warm=cubehelixLong(cubehelix(-100,.75,.35),cubehelix(80,1.5,.8)),cool=cubehelixLong(cubehelix(260,.75,.35),cubehelix(80,1.5,.8)),rainbow=cubehelix();function ramp(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var magma=ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),pi$4=Math.PI;function sign$1(e){return e<0?-1:1}function slope3(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(sign$1(o)+sign$1(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function slope2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function point$5(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,u=(o-r)/3;e._context.bezierCurveTo(r+u,i+u*t,o-u,a-u*n,o,a)}function MonotoneX(e){this._context=e}function MonotoneY(e){this._context=new ReflectContext(e)}function ReflectContext(e){this._context=e}function createDrawLines(e,t){let n=t.attributes;var r=1;return r>e.limits.lineWidthDims[1]&&(r=e.limits.lineWidthDims[1]),e({frag:"\n      precision mediump float;\n      varying vec3 v_color;\n      varying vec3 wow;\n      uniform float opacity;\n\n\n      void main() {\n        gl_FragColor = vec4(v_color + wow, .9);\n      }",vert:"\n      varying vec3 v_color;\n\n      precision mediump float;\n      attribute vec2 position;\n      attribute vec3 color;\n\n      uniform mat4 projection, view;\n\n      uniform float scale;\n      uniform vec2 offset;\n      uniform float tick;\n      uniform float phase;\n\n      uniform float freq;\n      attribute float dates;\n\n      varying vec3 wow;\n      uniform vec2 selection;\n\n      void main() {\n        vec2 p  = position;\n\n        if (selection.x < dates && dates < selection.y )\n        wow = vec3(1);\n\n        v_color = color;\n\n        // translate\n        p += offset;\n        gl_PointSize = .5;\n        gl_Position = projection * view * vec4(p, 0, 1);\n      }",blend:{enable:!1,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:!1},attributes:n,uniforms:{scale:1,offset:[0,0],phase:0,freq:.01,opacity:.5,selection:()=>window.getAdnan?window.getAdnan():[1,1],view:()=>window.getView(),projection:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},lineWidth:r,count:n.position.length/4,primitive:"lines"})}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$5(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,point$5(this,slope2(this,n=slope3(this,e,t)),n);break;default:point$5(this,this._t0,n=slope3(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(e,t){MonotoneX.prototype.point.call(this,t,e)},ReflectContext.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};const FRAGMENT_SHADER$1="\nprecision mediump float;\n\nuniform sampler2D texture;\n\nvarying vec2 uv;\n\nvoid main () {\n  gl_FragColor = texture2D(texture, uv);\n}\n",VERTEX_SHADER$1="\nprecision mediump float;\n\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\n\nattribute vec2 position;\n\nvarying vec2 uv;\n\nvoid main () {\n  uv = position;\n  gl_Position = projection * view * model * vec4(1.0 - 2.0 * position, 0, 1);\n}\n",FRAGMENT_SHADER$2="\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n\nprecision mediump float;\nuniform vec2 selection;\n\nvarying vec4 color;\n\nvoid main() {\n  float r = 0.0, delta = 0.0, alpha = 1.0;\n  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n  r = dot(cxy, cxy);\n\n  #ifdef GL_OES_standard_derivatives\n    delta = fwidth(r);\n    alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n  #endif\n\n  gl_FragColor = vec4(color.rgb, alpha * color.a);\n}\n",VERTEX_SHADER$2='\nprecision mediump float;\n\nuniform sampler2D colorTex;\nuniform float colorTexRes;\nuniform sampler2D stateTex;\nuniform float stateTexRes;\nuniform float pointSize;\nuniform float pointSizeExtra;\nuniform float numPoints;\nuniform float globalState;\nuniform float isColoredByCategory;\nuniform float isColoredByValue;\nuniform float maxColor;\nuniform float numColorStates;\nuniform float scaling;\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\n\nattribute float stateIndex;\n\n// variables to send to the fragment shader\nvarying vec4 color;\n\nvoid main() {\n  // First get the state\n  float eps = 0.5 / stateTexRes;\n  float stateRowIndex = floor((stateIndex + eps) / stateTexRes);\n  vec2 stateTexIndex = vec2(\n    (stateIndex / stateTexRes) - stateRowIndex + eps,\n    stateRowIndex / stateTexRes\n  );\n\n  vec4 state = texture2D(stateTex, stateTexIndex);\n\n  gl_Position = projection * view * model * vec4(state.x, state.y, 0.0, 1.0);\n\n  // Determine color index\n  float colorIndexCat = state.z * isColoredByCategory;\n  float colorIndexVal = floor(state.w * maxColor) * isColoredByValue;\n  float colorIndex = colorIndexCat + colorIndexVal;\n  // Multiply by the number of color states per color\n  // I.e., normal, active, hover, background, etc.\n  colorIndex *= numColorStates;\n  // Half a "pixel" or "texel" in texture coordinates\n  eps = 0.5 / colorTexRes;\n  float colorLinearIndex = colorIndex + globalState;\n  // Need to add cEps here to avoid floating point issue that can lead to\n  // dramatic changes in which color is loaded as floor(3/2.9) = 1 but\n  // floor(3/3.0001) = 0!\n  float colorRowIndex = floor((colorLinearIndex + eps) / colorTexRes);\n\n  vec2 colorTexIndex = vec2(\n    (colorLinearIndex / colorTexRes) - colorRowIndex + eps,\n    colorRowIndex / colorTexRes\n  );\n\n  color = texture2D(colorTex, colorTexIndex);\n\n  // The final scaling consists of linear scaling in [0, 1] and log scaling\n  // in [1, [\n  float finalScaling = min(1.0, scaling) + log2(max(1.0, scaling));\n\n  gl_PointSize = pointSize * finalScaling + pointSizeExtra;\n}\n',COLOR_ACTIVE_IDX=1,COLOR_BG_IDX=3,COLOR_HOVER_IDX=2,COLOR_NORMAL_IDX=0,COLOR_NUM_STATES=4,FLOAT_BYTES$1=Float32Array.BYTES_PER_ELEMENT,GL_EXTENSIONS=["OES_standard_derivatives","OES_texture_float"],LASSO_MIN_DELAY=15,LASSO_MIN_DIST=4,DEFAULT_DATA_ASPECT_RATIO=1,DEFAULT_WIDTH=100,DEFAULT_HEIGHT=100,DEFAULT_POINT_SIZE=30,DEFAULT_POINT_SIZE_SELECTED=2,DEFAULT_POINT_OUTLINE_WIDTH=2,DEFAULT_COLOR_BY=null,DEFAULT_COLOR_NORMAL=[.66,.66,.66,1],DEFAULT_COLOR_ACTIVE=[0,.55,1,1],DEFAULT_COLOR_HOVER=[1,1,1,1],DEFAULT_COLOR_BG=[0,0,0,1],DEFAULT_COLORS=[DEFAULT_COLOR_NORMAL,DEFAULT_COLOR_ACTIVE,DEFAULT_COLOR_HOVER,DEFAULT_COLOR_BG],DEFAULT_TARGET=[0,0],DEFAULT_DISTANCE=1,DEFAULT_ROTATION=0,DEFAULT_VIEW=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),DEFAULT_BACKGROUND_IMAGE=null,DEFAULT_LASSO_COLOR=[0,.666666667,1,1],DEFAULT_SHOW_RECTICLE=!1,DEFAULT_RECTICLE_COLOR=[1,1,1,.5],arrayMax=(e,t)=>e>t?e:t,checkReglExtensions=e=>!!e&&GL_EXTENSIONS.reduce((t,n)=>e.hasExtension(n)?t:(console.warn(`WebGL: ${n} extension not supported. Scatterplot might not render properly`),!1),!0),createRegl=e=>{const t=e.getContext("webgl"),n=[];return GL_EXTENSIONS.forEach(e=>{t.getExtension(e)?n.push(e):console.warn(`WebGL: ${e} extension not supported. Scatterplot might not render properly`)}),createOriginalRegl({gl:t,extensions:n})},dist$3=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),getBBox=e=>{let t=1/0,n=-1/0,r=1/0,i=-1/0;for(let o=0;o<e.length;o+=2)t=e[o]<t?e[o]:t,n=e[o]>n?e[o]:n,r=e[o+1]<r?e[o+1]:r,i=e[o+1]>i?e[o+1]:i;return[t,r,n,i]},hexToRgb=(e,t=!1)=>e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,n,r)=>`#${t}${t}${n}${n}${r}${r}`).substring(1).match(/.{2}/g).map(e=>parseInt(e,16)/255**t),loadImage=(e,t=!1)=>new Promise((n,r)=>{const i=new Image;t&&(i.crossOrigin="anonymous"),i.src=e,i.onload=(()=>{n(i)}),i.onerror=(e=>{r(e)})}),createTextureFromUrl=(e,t,n=!1)=>new Promise((r,i)=>{loadImage(t,n).then(t=>{r(e.texture(t))}).catch(e=>{i(e)})}),hexToRgba=(e,t=!1)=>[...hexToRgb(e,t),255**!t],isHex=e=>/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e),isNormFloat=e=>e>=0&&e<=1,isNormFloatArray=e=>Array.isArray(e)&&e.every(isNormFloat),isPointInPolygon=([e,t]=[],n)=>{let r,i,o,a,u=!1;for(let c=0,s=n.length-2;c<n.length;c+=2)r=n[c],i=n[c+1],o=n[s],i>t!=(a=n[s+1])>t&&e<(o-r)*(t-i)/(a-i)+r&&(u=!u),s=c;return u},isUint8=e=>Number.isInteger(e)&&e>=0&&e<=255,isUint8Array=e=>Array.isArray(e)&&e.every(isUint8),isRgb=e=>3===e.length&&(isNormFloatArray(e)||isUint8Array(e)),isRgba=e=>4===e.length&&(isNormFloatArray(e)||isUint8Array(e)),max$6=(e,t)=>e>t?e:t,min$5=(e,t)=>e<t?e:t,normNumArray=e=>e.map(t=>t/e.reduce(arrayMax,-1/0)),toRgba=(e,t)=>isRgba(e)?t&&!isNormFloatArray(e)?normNumArray(e):e:isRgb(e)?[...t?normNumArray(e):e,255**!t]:isHex(e)?hexToRgba(e,t):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),t?[1,1,1,1]:[255,255,255,255]),createScatterplot=({regl:e,background:t=DEFAULT_COLOR_BG,backgroundImage:n=null,canvas:r=document.createElement("canvas"),colorBy:i=null,colors:o=DEFAULT_COLORS,lassoColor:a=DEFAULT_LASSO_COLOR,lassoMinDelay:u=15,lassoMinDist:c=4,showRecticle:s=!1,recticleColor:l=DEFAULT_RECTICLE_COLOR,pointSize:f=30,pointSizeSelected:h=2,pointOutlineWidth:d=2,width:p=100,height:v=100,target:g=DEFAULT_TARGET,distance:m=1,rotation:_=0,view:y=DEFAULT_VIEW,drawLines:b}={})=>{const w=createPubSub(),x=new Float32Array(16),T=[0,0];checkReglExtensions(e);let E,A,S,R,M,C,N,L,$,k,D,I,O,F,P,U,j=toRgba(t,!0),Y=n,W=r,z=o,H=p,B=v,V=f,q=h,G=d,X=e||createRegl(r),Z=!1,Q=!1,K=[0,0],J=0,ee=[],te=toRgba(a,!0),ne=+u,re=+c,ie=[],oe=[],ae=1,ue=s,ce=toRgba(l,!0),se=0,le=0,fe=i,he=!1,de=!1,pe=1,ve=!1;const ge=e=>e/H*2-1,me=e=>1+e/B*-2,_e=()=>[ge(T[0]),me(T[1])],ye=()=>{const[e,t]=_e(),n=[e,t,1,1];return transformMat4$1(n,n,invert$3(x,multiply$3(x,N,multiply$3(x,E.view,L)))),n.slice(0,2)},be=()=>{const[e,t]=ye(),n=E.scaling,r=2*V*(min$5(1,n)+Math.log2(max$6(1,n)))*window.devicePixelRatio,i=r/H,o=r/B,a=M.range(e-i,t-o,e+i,t+o);let u,c=r;return a.forEach(n=>{const[r,i]=M.points[n],o=dist$3(r,i,e,t);o<c&&(c=o,u=n)}),c<V/H*2?u:-1},we=()=>{const e=(()=>T.slice())();if(R){dist$3(...e,...R)>re&&(ie.push(..._e()),oe.push(...ye()),R=e,ie.length>2&&A.setPoints(ie))}else ie.push(..._e()),oe.push(...ye()),R=e};let xe=throttle(we,ne,!0);const Te=()=>{ee.length&&(w.publish("deselect"),ee=[],tt())},Ee=e=>{ee=e,O({usage:"dynamic",type:"float",data:new Float32Array(ee)}),w.publish("select",{points:ee}),tt()},Ae=e=>{const t=W.getBoundingClientRect();return T[0]=e.clientX-t.left,T[1]=e.clientY-t.top,[...T]},Se=()=>{const e=(e=>{const t=getBBox(e),n=M.range(...t),r=[];return n.forEach(t=>{isPointInPolygon(M.points[t],e)&&r.push(t)}),r})(oe);Ee(e),ie=[],oe=[],R=void 0,A.clear()},Re=e=>{de&&(Z=!0,K=Ae(e),(Q=e.shiftKey)&&E.config({isFixed:!0}))},Me=()=>{de&&(Z=!1,Q&&(Q=!1,E.config({isFixed:!1}),Se()))},Ce=e=>{if(!de)return;const t=Ae(e);if(dist$3(...t,...K)>=4)return;const n=be();n>=0&&Ee([n])},Ne=()=>{Te()},Le=e=>{if(de){if(Ae(e),ve&&!Q){const e=be();it(e)}Q&&xe(),Z&&tt()}},$e=()=>{de&&(U=void 0,ve=!1,Me(),tt())},ke=(e=z)=>{const t=e.length;le=Math.max(2,Math.ceil(Math.sqrt(t)));const n=new Float32Array(le**2*4);return e.forEach((e,t)=>{n[4*t]=e[0],n[4*t+1]=e[1],n[4*t+2]=e[2],n[4*t+3]=t%4>0||1===pe?e[3]:pe}),X.texture({data:n,shape:[le,le,4],type:"float"})},De=()=>{N=fromScaling$3([],[1/(C=H/B),1,1]),L=fromScaling$3([],[ae,1,1])},Ie=()=>P,Oe=()=>le,Fe=()=>O,Pe=()=>V*window.devicePixelRatio,Ue=()=>0,je=()=>D,Ye=()=>se,We=()=>N;window.getView=(()=>E.view);const ze=()=>L,He=()=>E.scaling,Be=()=>1*("category"===fe),Ve=()=>1*("value"===fe),qe=()=>z.length/4-1,Ge=()=>4,Xe=(e,t,n,r=0)=>X({frag:FRAGMENT_SHADER$2,vert:VERTEX_SHADER$2,blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:!1},attributes:{stateIndex:{buffer:n,size:1}},uniforms:{projection:We,model:ze,view:getView,scaling:He,pointSize:Pe,pointSizeExtra:e,globalState:r,colorTex:Ie,colorTexRes:Oe,stateTex:je,stateTexRes:Ye,isColoredByCategory:Be,isColoredByValue:Ve,maxColor:qe,numColorStates:Ge},count:t,primitive:"points"}),Ze=Xe(Ue,()=>J,()=>I),Qe=Xe(Ue,()=>1,()=>F,2),Ke=X({frag:FRAGMENT_SHADER$1,vert:VERTEX_SHADER$1,attributes:{position:[0,1,0,0,1,0,0,1,1,1,1,0]},uniforms:{projection:We,model:ze,view:getView,texture:()=>Y},count:6}),Je=e=>{const t=new Float32Array(e);for(let n=0;n<e;++n)t[n]=n;return t},et=e=>{de=!1,J=e.length,D=(e=>{const t=e.length;se=Math.max(2,Math.ceil(Math.sqrt(t)));const n=new Float32Array(se**2*4);for(let r=0;r<t;++r)n[4*r]=e[r][0],n[4*r+1]=e[r][1],n[4*r+2]=e[r][2]||0,n[4*r+3]=e[r][3]||0;return X.texture({data:n,shape:[se,se,4],type:"float"})})(e),I({usage:"static",type:"float",data:Je(J)}),M=new KDBush(e,e=>e[0],e=>e[1],16),de=!0},tt=withRaf((e,t)=>{e&&et(e),de&&(X.clear({color:[0,0,0,0],depth:1}),he=E.tick(),Y&&Ke(),b({view:getView(),projection:getView()}),Ze(),Z||!ue&&!t||(()=>{if(!(U>=0))return;const[e,t]=M.points[U].slice(0,2),n=[e,t,0,1];multiply$3(x,N,multiply$3(x,E.view,L)),transformMat4$1(n,n,x),$.setPoints([-1,n[1],1,n[1]]),k.setPoints([n[0],1,n[0],-1]),$.draw(),k.draw(),Xe(()=>(q+2*G)*window.devicePixelRatio,()=>1,F,1)(),Xe(()=>(q+G)*window.devicePixelRatio,()=>1,F,3)()})(),U>=0&&Qe(),ee.length&&(()=>{const e=ee.length;Xe(()=>(q+2*G)*window.devicePixelRatio,()=>e,Fe,1)(),Xe(()=>(q+G)*window.devicePixelRatio,()=>e,Fe,3)(),Xe(()=>q,()=>e,Fe,1)()})(),A.draw(),he&&w.publish("view",E.view))}),nt=()=>{X.poll()},rt=({background:e=null,backgroundImage:t=Y,colorBy:n=fe,colors:r=null,opacity:i=null,lassoColor:o=null,lassoMinDelay:a=null,lassoMinDist:u=null,showRecticle:c=null,recticleColor:s=null,pointOutlineWidth:l=null,pointSize:f=null,pointSizeSelected:h=null,height:d=null,width:p=null,aspectRatio:v=null}={})=>{(e=>{e&&(j=toRgba(e,!0))})(e),(e=>{Y=e||null})(t),(e=>{switch(e){case"category":fe="category";break;case"value":fe="value";break;default:fe=null}})(n),(e=>{if(!e||!e.length)return;const t=[];try{e.forEach(e=>{if(!Array.isArray(e)||isRgb(e)||isRgba(e)){const n=toRgba(e,!0),r=[...n.slice(0,3),1];t.push(n,r,r)}else for(let n=0;n<3;n++)t.push(toRgba(e[n],!0));t.push(j)})}catch(e){console.error(e,"Invalid format. Please specify an array of colors or a nested array of accents per colors.")}z=t;try{P=ke()}catch(e){z=DEFAULT_COLORS,P=ke(),console.error("Invalid colors. Switching back to default colors.")}})(r),(e=>{!+e||+e<=0||(pe=+e,P=ke())})(i),(e=>{e&&(te=toRgba(e,!0),A.setStyle({color:te}))})(o),(e=>{+e&&(xe=throttle(we,ne=+e,!0))})(a),(e=>{+e&&(re=+e)})(u),(e=>{null!==e&&(ue=e)})(c),(e=>{e&&(ce=toRgba(e,!0),$.setStyle({color:ce}),k.setStyle({color:ce}))})(s),(e=>{!+e||+e<0||(G=+e)})(l),(e=>{!+e||+e<=0||(V=+e)})(f),(e=>{!+e||+e<0||(q=+e)})(h),(e=>{!+e||+e<=0||(B=+e,W.height=B*window.devicePixelRatio)})(d),(e=>{!+e||+e<=0||(H=+e,W.width=H*window.devicePixelRatio)})(p),(e=>{+e<=0||(ae=e)})(v),De(),E.refresh(),nt(),tt()},it=(e,t=!1)=>{let n=!1;if(e>=0){n=!0;const t=e!==U;U=e,F.subdata([e]),t&&w.publish("pointover",U)}else n=U,U=void 0,+n>=0&&w.publish("pointout",n);n&&tt(null,t)},ot=({key:e})=>{switch(e){case"Escape":Te()}},at=()=>{ve=!0},ut=()=>{it(),ve=!1,tt()};return De(),E=canvas2dCamera(W),y?E.set(clone$3(y)):E.lookAt([...g],m,_),A=createLine(X,{color:te,width:3,is2d:!0}),$=createLine(X,{color:ce,width:1,is2d:!0}),k=createLine(X,{color:ce,width:1,is2d:!0}),(S=scrollSpeed(W)).on("scroll",()=>{tt()}),I=X.buffer(),O=X.buffer(),F=X.buffer({usage:"dynamic",type:"float",length:FLOAT_BYTES$1}),P=ke(),rt({width:H,height:B}),window.addEventListener("keyup",ot,!1),window.addEventListener("blur",$e,!1),window.addEventListener("mousedown",Re,!1),window.addEventListener("mouseup",Me,!1),window.addEventListener("mousemove",Le,!1),W.addEventListener("mouseenter",at,!1),W.addEventListener("mouseleave",ut,!1),W.addEventListener("click",Ce,!1),W.addEventListener("dblclick",Ne,!1),{deselect:Te,destroy:()=>{window.removeEventListener("keyup",ot,!1),window.removeEventListener("blur",$e,!1),window.removeEventListener("mousedown",Re,!1),window.removeEventListener("mouseup",Me,!1),window.removeEventListener("mousemove",Le,!1),W.removeEventListener("mouseenter",at,!1),W.removeEventListener("mouseleave",ut,!1),W.removeEventListener("click",Ce,!1),W.removeEventListener("dblclick",Ne,!1),W=void 0,E=void 0,X=void 0,A.destroy(),S.dispose(),w.clear()},draw:tt,get:e=>"background"===e?j:"backgroundImage"===e?Y:"colorBy"===e?fe:"colors"===e?z:"lassoColor"===e?te:"showRecticle"===e?ue:"recticleColor"===e?ce:"opacity"===e?pe:"pointOutlineWidth"===e?G:"pointSize"===e?V:"pointSizeSelected"===e?q:"width"===e?H:"height"===e?B:"aspectRatio"===e?ae:"canvas"===e?W:"regl"===e?X:"version"===e?"0.0.8":void 0,hover:it,refresh:nt,reset:(e=>(...t)=>{const n=e(...t);return tt(),n})(()=>{y?E.set(clone$3(y)):E.lookAt([...g],m,_),w.publish("view",E.view)}),select:Ee,set:rt,subscribe:w.subscribe,unsubscribe:w.unsubscribe}};let clip$1=e=>e/4e3,processKMeans=e=>{console.log(e);let t=new Array(4*e.edges.length).fill(0);e.edges.forEach((n,r)=>{t[4*r]=clip$1(e.nodes[n.source].x),t[4*r+1]=clip$1(e.nodes[n.source].y),t[4*r+2]=clip$1(e.nodes[n.target].x),t[4*r+3]=clip$1(e.nodes[n.target].y)});let n=e.edges.map((t,n)=>+e.nodes[t.source].attributes.date),r=lodash.flatten(e.edges.map(t=>{let n=color(e.nodes[t.source].color);return[n.r/255,n.g/255,n.b/255]})),i=r.map((e,t)=>t/r.length);return{position:t,color:r,dates:n,fboColor:i}},init$1=e=>{console.log(createRegl),e.regl=createRegl(e.canvas),e.attributes=processKMeans(e.data),console.log(e.attributes),e.width=1e3,e.height=1e3,e.pointSize=20,e.drawLines=createDrawLines(e.regl,e);const t=createScatterplot(e);t.set({background:"#00ff00"}),console.log("yay");const n=e.data.nodes.map(e=>[e.x/4e3,e.y/4e3,123,"#000000"]);return t.draw(n),t};var index$4={init:init$1};export default index$4;export{createRegl,createTextureFromUrl};
